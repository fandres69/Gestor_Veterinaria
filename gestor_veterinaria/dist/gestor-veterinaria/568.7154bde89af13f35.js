"use strict";(self.webpackChunkGestor_veterinaria=self.webpackChunkGestor_veterinaria||[]).push([[568],{5568:(Ke,M,v)=>{v.r(M),v.d(M,{SalesManagerModule:()=>Be});var p=v(9808),C=v(1083),t=v(5e3);let E=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-sales-panel"]],decls:158,vars:0,consts:[[1,"container"],[1,"text-center"],[1,"row"],[1,"col-2"],["id","nav-tab","role","tablist",1,"nav","nav-tabs"],["id","nav-pedido-tab","data-bs-toggle","tab","data-bs-target","#nav-pedido","type","button","role","tab","aria-controls","nav-pedido","aria-selected","true",1,"nav-link","active"],[1,"material-icons","bi","md-48"],["id","nav-detalle-tab","data-bs-toggle","tab","data-bs-target","#nav-detalle","type","button","role","tab","aria-controls","nav-detalle","aria-selected","false",1,"nav-link"],["id","nav-devoluciones-tab","data-bs-toggle","tab","data-bs-target","#nav-devoluciones","type","button","role","tab","aria-controls","nav-devoluciones","aria-selected","false",1,"nav-link"],["id","nav-tabContent",1,"tab-content"],["id","nav-pedido","role","tabpanel","aria-labelledby","nav-pedido-tab",1,"tab-pane","fade","show","active"],[1,"row","m-1"],["routerLink","./cPedidos",1,"btn","btn-outline-dark"],[1,"col-1"],[1,"material-icons","bi"],[1,"col","text-center"],[1,"float-md-start"],["routerLink","./fPedidos",1,"btn","btn-outline-dark"],["routerLink","./uPedidos",1,"btn","btn-outline-dark"],["routerLink","./dPedidos",1,"btn","btn-outline-dark"],["id","nav-detalle","role","tabpanel","aria-labelledby","nav-detalle-tab",1,"tab-pane","fade"],[1,""],["routerLink","./cDetalles",1,"btn","btn-outline-dark"],["routerLink","./fDetalles",1,"btn","btn-outline-dark"],["routerLink","./uDetalles",1,"btn","btn-outline-dark"],["routerLink","./dDetalles",1,"btn","btn-outline-dark"],["id","nav-devoluciones","role","tabpanel","aria-labelledby","nav-devoluciones-tab",1,"tab-pane","fade"],["routerLink","./cDevoluciones",1,"btn","btn-outline-dark"],["routerLink","./fDevoluciones",1,"btn","btn-outline-dark"],["routerLink","./uDevoluciones",1,"btn","btn-outline-dark"],["routerLink","./dDevoluciones",1,"btn","btn-outline-dark"],[1,"col"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Administraci\xf3n Ventas"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",2)(5,"div",3)(6,"nav")(7,"div",4)(8,"button",5)(9,"span",6),t._uU(10,"receipt_long"),t.qZA()(),t.TgZ(11,"button",7)(12,"span",6),t._uU(13,"fact_check"),t.qZA()(),t.TgZ(14,"button",8)(15,"span",6),t._uU(16,"settings_backup_restore"),t.qZA()()()(),t.TgZ(17,"div",9)(18,"div",10)(19,"div")(20,"div",11)(21,"button",12)(22,"div",2)(23,"div",13)(24,"span",14),t._uU(25,"add"),t.qZA()(),t.TgZ(26,"div",15)(27,"span",16),t._uU(28,"Agregar"),t._UZ(29,"br"),t._uU(30,"Pedido"),t.qZA()()()()(),t.TgZ(31,"div",11)(32,"button",17)(33,"div",2)(34,"div",13)(35,"span",14),t._uU(36,"search"),t.qZA()(),t.TgZ(37,"div",15)(38,"span",16),t._uU(39,"Buscar"),t._UZ(40,"br"),t._uU(41,"Pedido"),t.qZA()()()()(),t.TgZ(42,"div",11)(43,"button",18)(44,"div",2)(45,"div",13)(46,"span",14),t._uU(47,"update"),t.qZA()(),t.TgZ(48,"div",15)(49,"span",16),t._uU(50,"Actualizar"),t._UZ(51,"br"),t._uU(52,"Pedido"),t.qZA()()()()(),t.TgZ(53,"div",11)(54,"button",19)(55,"div",2)(56,"div",13)(57,"span",14),t._uU(58,"remove"),t.qZA()(),t.TgZ(59,"div",15)(60,"span",16),t._uU(61,"Eliminar"),t._UZ(62,"br"),t._uU(63,"Pedido"),t.qZA()()()()()()(),t.TgZ(64,"div",20)(65,"div",21)(66,"div",11)(67,"button",22)(68,"div",2)(69,"div",13)(70,"span",14),t._uU(71,"add"),t.qZA()(),t.TgZ(72,"div",15)(73,"span",16),t._uU(74,"Agregar"),t._UZ(75,"br"),t._uU(76,"Detalle"),t.qZA()()()()(),t.TgZ(77,"div",11)(78,"button",23)(79,"div",2)(80,"div",13)(81,"span",14),t._uU(82,"search"),t.qZA()(),t.TgZ(83,"div",15)(84,"span",16),t._uU(85,"Buscar"),t._UZ(86,"br"),t._uU(87,"Detalle"),t.qZA()()()()(),t.TgZ(88,"div",11)(89,"button",24)(90,"div",2)(91,"div",13)(92,"span",14),t._uU(93,"update"),t.qZA()(),t.TgZ(94,"div",15)(95,"span",16),t._uU(96,"Actualizar"),t._UZ(97,"br"),t._uU(98,"Detalle"),t.qZA()()()()(),t.TgZ(99,"div",11)(100,"button",25)(101,"div",2)(102,"div",13)(103,"span",14),t._uU(104,"remove"),t.qZA()(),t.TgZ(105,"div",15)(106,"span",16),t._uU(107,"Eliminar"),t._UZ(108,"br"),t._uU(109,"Detalle"),t.qZA()()()()()()(),t.TgZ(110,"div",26)(111,"div",21)(112,"div",11)(113,"button",27)(114,"div",2)(115,"div",13)(116,"span",14),t._uU(117,"add"),t.qZA()(),t.TgZ(118,"div",15)(119,"span",16),t._uU(120,"Agregar"),t._UZ(121,"br"),t._uU(122,"Devoluci\xf3n"),t.qZA()()()()(),t.TgZ(123,"div",11)(124,"button",28)(125,"div",2)(126,"div",13)(127,"span",14),t._uU(128,"search"),t.qZA()(),t.TgZ(129,"div",15)(130,"span",16),t._uU(131,"Buscar"),t._UZ(132,"br"),t._uU(133,"Devoluci\xf3n"),t.qZA()()()()(),t.TgZ(134,"div",11)(135,"button",29)(136,"div",2)(137,"div",13)(138,"span",14),t._uU(139,"update"),t.qZA()(),t.TgZ(140,"div",15)(141,"span",16),t._uU(142,"Actualizar"),t._UZ(143,"br"),t._uU(144,"Devoluci\xf3n"),t.qZA()()()()(),t.TgZ(145,"div",11)(146,"button",30)(147,"div",2)(148,"div",13)(149,"span",14),t._uU(150,"remove"),t.qZA()(),t.TgZ(151,"div",15)(152,"span",16),t._uU(153,"Eliminar"),t._UZ(154,"br"),t._uU(155,"Devoluci\xf3n"),t.qZA()()()()()()()()(),t.TgZ(156,"div",31),t._UZ(157,"router-outlet"),t.qZA()()())},directives:[C.rH,C.lC],encapsulation:2}),a})();var _=v(4775),l=v(3075),Z=v(4004),x=v(8372),z=v(5226),m=v.n(z),w=v(520),Q=v(9019),A=(()=>{return(a=A||(A={})).cPedido="/salesManager/createOrder",a.uPedido="/salesManager/updateOrder",a.dPedido="/salesManager/deleteOrder",a.getAllPedidos="/salesManager/getPedidos",a.cPedidoSquelize="/salesManager/cOrder",a.cDetailOrder="/salesManager/createOrderDetail",a.uDetailOrder="/salesManager/updateOrderDetail",a.dDetailOrder="/salesManager/deleteOrderDetail",a.getDetailOrder="/salesManager/getDetailByOrder/",a.bulkDetalles="/salesManager/bulkDetalles",a.cDevolucion="/salesManager/createDevolution",a.uDevolucion="/salesManager/updateDevolution",a.dDevolucion="/salesManager/deleteDevolution",a.getAllDevolucion="/salesManager/getAllDevoluciones",a.getDevolucion="/salesManager/getAllDevolucionesByOrder/",a.getViewInv="/salesManager/vewDetailInv",A;var a})(),Y=v(7579),T=v(262),U=v(9646);let q=(()=>{class a{constructor(e){this.http=e,this.idPedido=0,this.detalleL=[],this.baseUrl=Q.N.ApiUrl,this.header=(new w.WM).set("content-type","application/json;charset=utf-8").set("Accept","*/*").set("Access-Control-Allow-Origin","*").set("x-token",localStorage.getItem("x-token")||""),this.detalleL$=new Y.x}get IdPedido(){return this.idPedido}Pedido(e){this.idPedido=e}CreateOrder(e){return this.http.post(`${this.baseUrl}${A.cPedido}`,e,{headers:this.header}).pipe((0,Z.U)(o=>o),(0,T.K)(o=>(0,U.of)(o)))}CreateOrderSquelizer(e){return this.http.post(`${this.baseUrl}${A.cPedidoSquelize}`,e,{headers:this.header}).pipe((0,Z.U)(o=>o),(0,T.K)(o=>(0,U.of)(o)))}getAllOrders(){return this.http.get(`${this.baseUrl}${A.getAllPedidos}`,{headers:this.header}).pipe((0,Z.U)(i=>i),(0,T.K)(i=>(0,U.of)(i)))}updateOrder(e){return this.http.post(`${this.baseUrl}${A.uPedido}`,e,{headers:this.header}).pipe((0,Z.U)(o=>o),(0,T.K)(o=>(0,U.of)(o)))}deleteOrder(e){return this.http.post(`${this.baseUrl}${A.dPedido}`,e,{headers:this.header}).pipe((0,Z.U)(o=>o),(0,T.K)(o=>(0,U.of)(o)))}viewInventario(){return this.http.get(`${this.baseUrl}${A.getViewInv}`,{headers:this.header}).pipe((0,Z.U)(i=>i),(0,T.K)(i=>(0,U.of)(i)))}addDetalle(e){this.detalleL.push(e),this.detalleL$.next(this.detalleL)}getDetalles(){return this.detalleL$.asObservable()}clearDetalle(){this.detalleL=[],this.detalleL$.next(this.detalleL)}bulkDetalles(e){return this.http.post(`${this.baseUrl}${A.bulkDetalles}`,{detalles:e},{headers:this.header}).pipe((0,Z.U)(s=>s),(0,T.K)(s=>(0,U.of)(s)))}loadDetallesByOrden(e){return this.http.get(`${this.baseUrl}${A.getDetailOrder}${e}`,{headers:this.header}).pipe((0,Z.U)(o=>o),(0,T.K)(o=>(0,U.of)(o)))}updateDetalle(e){return this.http.post(`${this.baseUrl}${A.uDetailOrder}`,e,{headers:this.header}).pipe((0,Z.U)(o=>o),(0,T.K)(o=>(0,U.of)(o)))}delDetalle(e){return this.http.post(`${this.baseUrl}${A.dDetailOrder}`,e,{headers:this.header}).pipe((0,Z.U)(o=>o),(0,T.K)(o=>(0,U.of)(o)))}createDevolucion(e){return this.http.post(`${this.baseUrl}${A.cDevolucion}`,e,{headers:this.header}).pipe((0,Z.U)(o=>o),(0,T.K)(o=>(0,U.of)(o)))}getAllDevoluciones(){return this.http.get(`${this.baseUrl}${A.getAllDevolucion}`,{headers:this.header}).pipe((0,Z.U)(i=>i),(0,T.K)(i=>(0,U.of)(i)))}updateDevolucion(e){return this.http.post(`${this.baseUrl}${A.uDevolucion}`,e,{headers:this.header}).pipe((0,Z.U)(o=>o),(0,T.K)(o=>(0,U.of)(o)))}deleteDevolucion(e){return this.http.post(`${this.baseUrl}${A.dDevolucion}`,e,{headers:this.header}).pipe((0,Z.U)(o=>o),(0,T.K)(o=>(0,U.of)(o)))}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(w.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var F=v(8382),D=v(787),f=v(7322),O=v(7531),b=v(3092),I=v(508),L=v(7423),S=v(6856);function V(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().selectForQuery(s)}),t._uU(1),t.qZA()}if(2&a){const e=n.$implicit;t.Q6J("value",e.documento),t.xp6(1),t.AsE(" ",e.documento," - ",e.nombre," ")}}function $(a,n){if(1&a&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.AsE("",e.documento," - ",e.nombre,"")}}function H(a,n){1&a&&(t.TgZ(0,"span",29),t._uU(1,"Este campo es obligatorio, mas de 3 caracteres"),t.qZA())}function X(a,n){if(1&a&&(t.TgZ(0,"option",30),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.s9C("value",e.codigo),t.xp6(1),t.Oqu(e.Ciudad)}}function B(a,n){1&a&&(t.TgZ(0,"span",29),t._uU(1,"Este campo es obligatorio, mas de 3 caracteres"),t.qZA())}function G(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",31)(1,"div",32)(2,"button",33),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).createPedido()}),t._uU(3,"Guardar"),t.qZA()(),t.TgZ(4,"div",32)(5,"button",34),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).cancelar()}),t._uU(6,"Cancelar"),t.qZA()()()}}function K(a,n){if(1&a&&(t.TgZ(0,"div",10)(1,"form",11)(2,"div",12)(3,"select",13),t.YNc(4,$,2,2,"option",14),t.qZA(),t.TgZ(5,"label",15),t._uU(6,"Cliente"),t.qZA()(),t.TgZ(7,"div",12),t._UZ(8,"input",16),t.TgZ(9,"label",17),t._uU(10,"Direcci\xf3n de entrega"),t.qZA(),t.YNc(11,H,2,0,"span",18),t.qZA(),t.TgZ(12,"div",12)(13,"select",19),t.YNc(14,X,2,2,"option",20),t.qZA(),t.TgZ(15,"label",21),t._uU(16,"Ciudad"),t.qZA()(),t.TgZ(17,"div",12),t._UZ(18,"input",22),t.TgZ(19,"label",17),t._uU(20,"Observaciones"),t.qZA(),t.YNc(21,B,2,0,"span",18),t.qZA(),t.TgZ(22,"div",12)(23,"mat-form-field",23)(24,"mat-label"),t._uU(25,"Fecha"),t.qZA(),t._UZ(26,"input",24)(27,"mat-datepicker-toggle",25)(28,"mat-datepicker",null,26),t.qZA()(),t.YNc(30,G,7,0,"div",27),t.qZA()()),2&a){const e=t.MAs(29),i=t.oxw();t.xp6(1),t.Q6J("formGroup",i.miForm),t.xp6(3),t.Q6J("ngForOf",i.FiltroC),t.xp6(7),t.Q6J("ngIf",i.ValidaCampo("direccionEntrega")),t.xp6(3),t.Q6J("ngForOf",i.ciudadesL),t.xp6(7),t.Q6J("ngIf",i.ValidaCampo("observaciones")),t.xp6(5),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e),t.xp6(3),t.Q6J("ngIf",i.editar)}}let W=(()=>{class a{constructor(e,i,o,s,d){this.fb=e,this.salesMng=i,this.dataM=o,this.clManager=s,this.router=d,this.myControl=new l.NI,this.criterio="",this.ClientesS=[],this.FiltroC=[],this.forQuery=!1,this.forLoad=!1,this.ciudadesL=[],this.editar=!1,this.miForm=this.fb.group({cliente:[,[l.kI.required]],direccionEntrega:["",[l.kI.required,l.kI.minLength(3)]],ciudad:[0,[l.kI.required]],observaciones:[""],fecha:[,[l.kI.required]]})}ngOnInit(){this.loadCiudades(),this.loadAllClients(),this.filteredOptions=this.myControl.valueChanges.pipe((0,Z.U)(e=>this._filter(e)))}_filter(e){if((0,x.b)(200),""!=this.criterio){const i=e.toString().toLowerCase();this.FiltroC=this.ClientesS.filter(o=>{var s;return null===(s=o.documento)||void 0===s?void 0:s.toString().toLowerCase().includes(i)}),0===this.FiltroC.length&&(this.FiltroC=[{nombre:"No hay coincidencias"}])}else this.FiltroC=[{nombre:"No hay coincidencias"}];return this.FiltroC}selectForQuery(e){this.forQuery=!0,localStorage.setItem("search",JSON.stringify(e)),this.selectedItem=JSON.parse(localStorage.getItem("search")||"")}limpiarInfo(){this.selectedItem={},this.forLoad=!1,this.forQuery=!1,localStorage.removeItem("search"),this.miForm.reset(),this.miForm.disable(),this.editar=!1}loadCiudades(){this.dataM.getAllCities().subscribe(e=>{e.ciudades&&(this.ciudadesL=e.ciudades[0])})}loadAllClients(){this.clManager.getAllClients().subscribe(e=>{e.clientes&&(this.ClientesS=e.clientes[0])})}loadInfo(){var e,i,o,s,d;if(!this.forQuery)return void m().fire({text:"No has seleccionado un cliente aun",icon:"warning"});this.selectedItem=JSON.parse(localStorage.getItem("search")||""),null===(e=this.miForm.get("direccionEntrega"))||void 0===e||e.setValue(this.selectedItem.direccion),null===(i=this.miForm.get("ciudad"))||void 0===i||i.setValue(this.selectedItem.ciudad),null===(o=this.miForm.get("cliente"))||void 0===o||o.setValue(this.selectedItem.documento);const r=new Date;null===(s=this.miForm.get("fecha"))||void 0===s||s.setValue(r),this.miForm.enable(),null===(d=this.miForm.get("cliente"))||void 0===d||d.disable(),this.forLoad=!0,this.editar=!0}ValidaCampo(e){return this.miForm.controls[e].errors&&this.miForm.controls[e].touched}editable(){this.editar=!0,this.miForm.enable()}cancelar(){this.editar=!1,this.criterio="",this.miForm.reset(),this.limpiarInfo()}createPedido(){var e,i,o,s;if(this.miForm.invalid)return void m().fire({icon:"info",title:"Oops...",text:"Hay cosas por corregir"}).then(g=>{this.miForm.markAllAsTouched()});const d=new Date(null===(e=this.miForm.get("fecha"))||void 0===e?void 0:e.value);let r=parseInt(d.getMonth().toString())+1;const c={cliente:this.selectedItem.documento,direccionEntrega:null===(i=this.miForm.get("direccionEntrega"))||void 0===i?void 0:i.value,ciudad:null===(o=this.miForm.get("ciudad"))||void 0===o?void 0:o.value,observaciones:(null===(s=this.miForm.get("observaciones"))||void 0===s?void 0:s.value)||"",dia:d.getDate(),mes:r,anio:d.getFullYear()};this.salesMng.CreateOrderSquelizer(c).subscribe(g=>{if(g.error){const u=g.error.errors[0].msg,h=g.error.errors[0].param||"";m().fire({icon:"error",title:"Oops..."+h,text:u})}else g.salesOrders&&(this.nPedido=g.salesOrders[0]),m().fire({icon:"success",title:"Creaci\xf3n correcta",text:g.statusDescription}).then(u=>{this.miForm.reset(),this.limpiarInfo(),this.salesMng.Pedido(this.nPedido.idpedidos||0),this.router.navigate(["./salesManager/cDetalles"])})})}prueba(){m().fire({icon:"success",title:"Creaci\xf3n correcta",text:"Prueba de creaci\xf3n"}).then(e=>{this.miForm.reset(),this.limpiarInfo(),this.salesMng.Pedido(10),this.router.navigate(["./salesManager/cDetalles"])})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l.qu),t.Y36(q),t.Y36(F.m),t.Y36(D.y),t.Y36(C.F0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-pedidos"]],decls:17,vars:7,consts:[[1,"container"],[1,"example-form","form-floating","p-2","m-2"],[1,"m-3","example-full-width"],["type","text","placeholder","","aria-label","Documento cliente","matInput","",1,"example-full-width",3,"formControl","matAutocomplete","ngModel","ngModelChange","focus"],[1,"example-full-width"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",1,"m-2",3,"click"],["class","container form-control form-floating",4,"ngIf"],[3,"value","click"],[1,"container","form-control","form-floating"],["action","",3,"formGroup"],[1,"form-floating","m-3"],["id","cliente","formControlName","cliente",1,"form-select"],["value","{{item.documento}",4,"ngFor","ngForOf"],["for","cliente"],["type","text","id","floatingInput","placeholder","Direcci\xf3n de entrega","formControlName","direccionEntrega",1,"form-control"],["for","floatingInput"],["class","form-text text-danger",4,"ngIf"],["id","ciudad","formControlName","ciudad",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","ciudad"],["type","text","id","floatingInput","placeholder","Observaciones","formControlName","observaciones",1,"form-control"],[1,"m-3"],["matInput","","placeholder","Fecha DD/MM/YYYY","formControlName","fecha",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["class","form-floating m-5 p-1",4,"ngIf"],["value","{{item.documento}"],[1,"form-text","text-danger"],[3,"value"],[1,"form-floating","m-5","p-1"],[1,"float-md-end","m-3"],[1,"btn","btn-outline-success",3,"click"],[1,"btn","btn-outline-secondary",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Creaci\xf3n de pedidos"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",0)(5,"form",1)(6,"mat-form-field",2)(7,"mat-label"),t._uU(8,"Documento cliente"),t.qZA(),t.TgZ(9,"input",3),t.NdJ("ngModelChange",function(s){return i.criterio=s})("focus",function(){return i.limpiarInfo()}),t.qZA(),t.TgZ(10,"mat-autocomplete",4,5),t.YNc(12,V,2,3,"mat-option",6),t.ALo(13,"async"),t.qZA()(),t.TgZ(14,"button",7),t.NdJ("click",function(){return i.loadInfo()}),t._uU(15,"Seleccionar"),t.qZA()()(),t.YNc(16,K,31,8,"div",8),t.qZA()),2&e){const o=t.MAs(11);t.xp6(9),t.Q6J("formControl",i.myControl)("matAutocomplete",o)("ngModel",i.criterio),t.xp6(3),t.Q6J("ngForOf",t.lcZ(13,5,i.filteredOptions)),t.xp6(4),t.Q6J("ngIf",i.forLoad)}},directives:[l._Y,l.JL,l.F,f.KE,f.hX,O.Nt,l.Fj,b.ZL,l.JJ,l.oH,b.XC,p.sg,I.ey,L.lW,p.O5,l.sg,l.EJ,l.u,l.YN,l.Kr,S.hl,S.nW,f.R9,S.Mq],pipes:[p.Ov],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]}),a})();var P=v(7850);let N=(()=>{class a{transform(e,i,o){let d=!1;if(!e.length)return[];["all","ALL","todo","TODO","max","MAX"].forEach(g=>{i===g&&(d=!0)});const r=d?e.length:parseInt(i.toString())||10;let c=o||1;return c--,e.slice(c*r,(c+1)*r)}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275pipe=t.Yjl({name:"paginatorPipe",type:a,pure:!0}),a})();function j(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",10),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().selectForQuery(s)}),t._uU(1),t.qZA()}if(2&a){const e=n.$implicit;t.Q6J("value",e.documento),t.xp6(1),t.AsE(" ",e.documento," - ",e.nombre," ")}}function R(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td")(15,"a",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).loadForUpdate(s)}),t._uU(16,"Ver"),t.qZA()()()}if(2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.idpedidos),t.xp6(2),t.AsE("",e.documento," - ",e.nombre,""),t.xp6(2),t.Oqu(e.direccionEntrega),t.xp6(2),t.Oqu(e.ciudadN),t.xp6(2),t.Oqu(e.observaciones),t.xp6(2),t.Oqu(t.lcZ(13,7,e.fecha))}}function tt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",0)(1,"table",11)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cliente"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Direcci\xf3n de entrega"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Ciudad"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Observaciones"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Fecha"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Acci\xf3n"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,R,17,9,"tr",12),t.ALo(20,"paginatorPipe"),t.qZA()(),t.TgZ(21,"mat-paginator",13),t.NdJ("page",function(o){return t.CHM(e),t.oxw().pageEvent(o)}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(19),t.Q6J("ngForOf",t.Dn7(20,4,e.salidaList,e.p_Size,e.page)),t.xp6(2),t.Q6J("length",e.salidaList.length)("pageSize",e.p_Size)("pageSizeOptions",e.optionsPage)}}function et(a,n){if(1&a&&(t.TgZ(0,"option",32),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.AsE("",e.documento," - ",e.nombre,"")}}function it(a,n){1&a&&(t.TgZ(0,"span",33),t._uU(1,"Este campo es obligatorio, mas de 3 caracteres"),t.qZA())}function ot(a,n){if(1&a&&(t.TgZ(0,"option",34),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.Ciudad)}}function st(a,n){1&a&&(t.TgZ(0,"span",33),t._uU(1,"Este campo es obligatorio, mas de 3 caracteres"),t.qZA())}function at(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",35)(1,"div",36)(2,"button",37),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).cancelar()}),t._uU(3,"Aceptar"),t.qZA()()()}}function rt(a,n){if(1&a&&(t.TgZ(0,"div",15)(1,"form",16)(2,"div",17)(3,"select",18),t.YNc(4,et,2,2,"option",19),t.qZA(),t.TgZ(5,"label",20),t._uU(6,"Cliente"),t.qZA()(),t.TgZ(7,"div",17),t._UZ(8,"input",21),t.TgZ(9,"label",22),t._uU(10,"Direcci\xf3n de entrega"),t.qZA(),t.YNc(11,it,2,0,"span",23),t.qZA(),t.TgZ(12,"div",17)(13,"select",24),t.YNc(14,ot,2,1,"option",25),t.qZA(),t.TgZ(15,"label",26),t._uU(16,"Ciudad"),t.qZA()(),t.TgZ(17,"div",17),t._UZ(18,"input",27),t.TgZ(19,"label",22),t._uU(20,"Observaciones"),t.qZA(),t.YNc(21,st,2,0,"span",23),t.qZA(),t.TgZ(22,"div",17)(23,"mat-form-field")(24,"mat-label"),t._uU(25,"Fecha"),t.qZA(),t._UZ(26,"input",28)(27,"mat-datepicker-toggle",29)(28,"mat-datepicker",null,30),t.qZA()(),t.YNc(30,at,4,0,"div",31),t.qZA()()),2&a){const e=t.MAs(29),i=t.oxw();t.xp6(1),t.Q6J("formGroup",i.miForm),t.xp6(3),t.Q6J("ngForOf",i.FiltroC),t.xp6(7),t.Q6J("ngIf",i.ValidaCampo("direccionEntrega")),t.xp6(3),t.Q6J("ngForOf",i.ciudadesL),t.xp6(7),t.Q6J("ngIf",i.ValidaCampo("observaciones")),t.xp6(5),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e),t.xp6(3),t.Q6J("ngIf",i.editar)}}let dt=(()=>{class a{constructor(e,i,o,s){this.fb=e,this.salesMng=i,this.dataM=o,this.clManager=s,this.myControl=new l.NI,this.criterio="",this.ClientesS=[],this.FiltroC=[],this.forQuery=!1,this.forLoad=!1,this.ciudadesL=[],this.salesOrders=[],this.salesFilters=[],this.salidaList=[],this.editar=!1,this.p_Size=5,this.page=1,this.optionsPage=[5,10,30,50],this.miForm=this.fb.group({cliente:[,[l.kI.required]],direccionEntrega:["",[l.kI.required,l.kI.minLength(3)]],ciudad:[0,[l.kI.required]],observaciones:[""],fecha:[,[l.kI.required]]})}ngOnInit(){this.loadCiudades(),this.loadAllClients(),this.loadOrders(),this.filteredOptions=this.myControl.valueChanges.pipe((0,Z.U)(e=>this._filter(e)))}_filter(e){if((0,x.b)(200),""!=this.criterio){const i=e.toString().toLowerCase();this.FiltroC=this.ClientesS.filter(o=>{var s;return null===(s=o.documento)||void 0===s?void 0:s.toString().toLowerCase().includes(i)}),0===this.FiltroC.length&&(this.FiltroC=[{nombre:"No hay coincidencias"}])}else this.FiltroC=[{nombre:"No hay coincidencias"}];return this.FiltroC}selectForQuery(e){this.forQuery=!0,localStorage.setItem("search",JSON.stringify(e)),this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.salesFilters=this.salesOrders.filter(i=>i.cliente===this.selectedItem.documento),this.salidaList=[],this.salesFilters.length>0&&this.salesFilters.forEach(i=>{const s=new Date(i.anio||1900,i.mes?i.mes-1:1,i.dia||1),d=this.ciudadesL.filter(c=>c.codigo===i.ciudad);this.salidaList.push({idpedidos:i.idpedidos,documento:this.selectedItem.documento||0,nombre:this.selectedItem.nombre||"",direccionEntrega:i.direccionEntrega||"",ciudad:i.ciudad||"",ciudadN:d[0].Ciudad||"",observaciones:i.observaciones||"",fecha:s})})}limpiarInfo(){this.selectedItem={},this.forLoad=!1,this.forQuery=!1,localStorage.removeItem("search"),this.miForm.reset(),this.miForm.disable(),this.editar=!1}loadOrders(){this.salesMng.getAllOrders().subscribe(e=>{if(e.salesOrders)return this.salesOrders=e.salesOrders[0],void(this.salesOrders=this.salesOrders.sort().reverse())})}loadCiudades(){this.dataM.getAllCities().subscribe(e=>{e.ciudades&&(this.ciudadesL=e.ciudades[0])})}loadAllClients(){this.clManager.getAllClients().subscribe(e=>{e.clientes&&(this.ClientesS=e.clientes[0])})}loadInfo(){this.forQuery?(this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.forLoad=!0):m().fire({text:"No has seleccionado un cliente aun",icon:"warning"})}loadForUpdate(e){var i,o,s,d,r,c;this.OrderForUpd=e,null===(i=this.miForm.get("direccionEntrega"))||void 0===i||i.setValue(e.direccionEntrega),null===(o=this.miForm.get("ciudad"))||void 0===o||o.setValue(e.ciudad),null===(s=this.miForm.get("cliente"))||void 0===s||s.setValue(e.documento),null===(d=this.miForm.get("fecha"))||void 0===d||d.setValue(e.fecha),null===(r=this.miForm.get("observaciones"))||void 0===r||r.setValue(e.observaciones),this.miForm.disable(),null===(c=this.miForm.get("cliente"))||void 0===c||c.disable(),this.forLoad=!1,this.editar=!0}pageEvent(e){this.p_Size=e.pageSize,this.page=e.pageIndex+1}ValidaCampo(e){return this.miForm.controls[e].errors&&this.miForm.controls[e].touched}editable(){this.editar=!0,this.miForm.disable()}cancelar(){this.editar=!1,this.criterio="",this.miForm.reset(),this.limpiarInfo()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l.qu),t.Y36(q),t.Y36(F.m),t.Y36(D.y))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-find-pedidos"]],decls:18,vars:8,consts:[[1,"container"],[1,"example-form","form-floating","p-2","m-2"],[1,"m-3","example-full-width"],["type","text","placeholder","","aria-label","Documento cliente","matInput","",1,"example-full-width",3,"formControl","matAutocomplete","ngModel","ngModelChange","focus"],[1,"example-full-width"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",1,"m-2",3,"click"],["class","container",4,"ngIf"],["class","container form-control form-floating",4,"ngIf"],[3,"value","click"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],["aria-label","Select page",1,"m-3","example-full-width",3,"length","pageSize","pageSizeOptions","page"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"container","form-control","form-floating"],["action","",3,"formGroup"],[1,"form-floating","m-3"],["id","cliente","formControlName","cliente",1,"form-select"],["value","{{item.documento}",4,"ngFor","ngForOf"],["for","cliente"],["type","text","id","floatingInput","placeholder","Direcci\xf3n de entrega","formControlName","direccionEntrega",1,"form-control"],["for","floatingInput"],["class","form-text text-danger",4,"ngIf"],["id","ciudad","formControlName","ciudad",1,"form-select"],["value","{{ciudades.codigo}",4,"ngFor","ngForOf"],["for","ciudad"],["type","text","id","floatingInput","placeholder","Observaciones","formControlName","observaciones",1,"form-control"],["matInput","","placeholder","Fecha DD/MM/YYYY","formControlName","fecha",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["class","form-floating m-5 p-1",4,"ngIf"],["value","{{item.documento}"],[1,"form-text","text-danger"],["value","{{ciudades.codigo}"],[1,"form-floating","m-5","p-1"],[1,"float-md-end","m-3"],[1,"btn","btn-outline-primary",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"B\xfasqueda de pedidos"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",0)(5,"form",1)(6,"mat-form-field",2)(7,"mat-label"),t._uU(8,"Documento cliente"),t.qZA(),t.TgZ(9,"input",3),t.NdJ("ngModelChange",function(s){return i.criterio=s})("focus",function(){return i.limpiarInfo()}),t.qZA(),t.TgZ(10,"mat-autocomplete",4,5),t.YNc(12,j,2,3,"mat-option",6),t.ALo(13,"async"),t.qZA()(),t.TgZ(14,"button",7),t.NdJ("click",function(){return i.loadInfo()}),t._uU(15,"Visualizar"),t.qZA()()(),t.YNc(16,tt,22,8,"div",8),t.YNc(17,rt,31,8,"div",9),t.qZA()),2&e){const o=t.MAs(11);t.xp6(9),t.Q6J("formControl",i.myControl)("matAutocomplete",o)("ngModel",i.criterio),t.xp6(3),t.Q6J("ngForOf",t.lcZ(13,6,i.filteredOptions)),t.xp6(4),t.Q6J("ngIf",i.forLoad),t.xp6(1),t.Q6J("ngIf",i.editar)}},directives:[l._Y,l.JL,l.F,f.KE,f.hX,O.Nt,l.Fj,b.ZL,l.JJ,l.oH,b.XC,p.sg,I.ey,L.lW,p.O5,P.NW,l.sg,l.EJ,l.u,l.YN,l.Kr,S.hl,S.nW,f.R9,S.Mq],pipes:[p.Ov,N,p.uU],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]}),a})();function nt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",10),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().selectForQuery(s)}),t._uU(1),t.qZA()}if(2&a){const e=n.$implicit;t.Q6J("value",e.documento),t.xp6(1),t.AsE(" ",e.documento," - ",e.nombre," ")}}function lt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td")(15,"a",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).loadForUpdate(s)}),t._uU(16,"Editar"),t.qZA()()()}if(2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.idpedidos),t.xp6(2),t.AsE("",e.documento," - ",e.nombre,""),t.xp6(2),t.Oqu(e.direccionEntrega),t.xp6(2),t.Oqu(e.ciudadN),t.xp6(2),t.Oqu(e.observaciones),t.xp6(2),t.Oqu(t.lcZ(13,7,e.fecha))}}function ct(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",0)(1,"table",11)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cliente"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Direcci\xf3n de entrega"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Ciudad"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Observaciones"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Fecha"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Acci\xf3n"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,lt,17,9,"tr",12),t.ALo(20,"paginatorPipe"),t.qZA()(),t.TgZ(21,"mat-paginator",13),t.NdJ("page",function(o){return t.CHM(e),t.oxw().pageEvent(o)}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(19),t.Q6J("ngForOf",t.Dn7(20,4,e.salidaList,e.p_Size,e.page)),t.xp6(2),t.Q6J("length",e.salidaList.length)("pageSize",e.p_Size)("pageSizeOptions",e.optionsPage)}}function ut(a,n){if(1&a&&(t.TgZ(0,"option",32),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.AsE("",e.documento," - ",e.nombre,"")}}function pt(a,n){1&a&&(t.TgZ(0,"span",33),t._uU(1,"Este campo es obligatorio, mas de 3 caracteres"),t.qZA())}function ht(a,n){if(1&a&&(t.TgZ(0,"option",34),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.Ciudad)}}function mt(a,n){1&a&&(t.TgZ(0,"span",33),t._uU(1,"Este campo es obligatorio, mas de 3 caracteres"),t.qZA())}function gt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",35)(1,"div",36)(2,"button",37),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).createPedido()}),t._uU(3,"Guardar"),t.qZA()(),t.TgZ(4,"div",36)(5,"button",38),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).cancelar()}),t._uU(6,"Cancelar"),t.qZA()()()}}function _t(a,n){if(1&a&&(t.TgZ(0,"div",15)(1,"form",16)(2,"div",17)(3,"select",18),t.YNc(4,ut,2,2,"option",19),t.qZA(),t.TgZ(5,"label",20),t._uU(6,"Cliente"),t.qZA()(),t.TgZ(7,"div",17),t._UZ(8,"input",21),t.TgZ(9,"label",22),t._uU(10,"Direcci\xf3n de entrega"),t.qZA(),t.YNc(11,pt,2,0,"span",23),t.qZA(),t.TgZ(12,"div",17)(13,"select",24),t.YNc(14,ht,2,1,"option",25),t.qZA(),t.TgZ(15,"label",26),t._uU(16,"Ciudad"),t.qZA()(),t.TgZ(17,"div",17),t._UZ(18,"input",27),t.TgZ(19,"label",22),t._uU(20,"Observaciones"),t.qZA(),t.YNc(21,mt,2,0,"span",23),t.qZA(),t.TgZ(22,"div",17)(23,"mat-form-field")(24,"mat-label"),t._uU(25,"Fecha"),t.qZA(),t._UZ(26,"input",28)(27,"mat-datepicker-toggle",29)(28,"mat-datepicker",null,30),t.qZA()(),t.YNc(30,gt,7,0,"div",31),t.qZA()()),2&a){const e=t.MAs(29),i=t.oxw();t.xp6(1),t.Q6J("formGroup",i.miForm),t.xp6(3),t.Q6J("ngForOf",i.FiltroC),t.xp6(7),t.Q6J("ngIf",i.ValidaCampo("direccionEntrega")),t.xp6(3),t.Q6J("ngForOf",i.ciudadesL),t.xp6(7),t.Q6J("ngIf",i.ValidaCampo("observaciones")),t.xp6(5),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e),t.xp6(3),t.Q6J("ngIf",i.editar)}}let ft=(()=>{class a{constructor(e,i,o,s){this.fb=e,this.salesMng=i,this.dataM=o,this.clManager=s,this.myControl=new l.NI,this.criterio="",this.ClientesS=[],this.FiltroC=[],this.forQuery=!1,this.forLoad=!1,this.ciudadesL=[],this.salesOrders=[],this.salesFilters=[],this.salidaList=[],this.editar=!1,this.miForm=this.fb.group({cliente:[,[l.kI.required]],direccionEntrega:["",[l.kI.required,l.kI.minLength(3)]],ciudad:[0,[l.kI.required]],observaciones:[""],fecha:[,[l.kI.required]]}),this.p_Size=5,this.page=1,this.optionsPage=[5,10,30,50]}ngOnInit(){this.loadCiudades(),this.loadAllClients(),this.loadOrders(),this.filteredOptions=this.myControl.valueChanges.pipe((0,Z.U)(e=>this._filter(e)))}_filter(e){if((0,x.b)(200),""!=this.criterio){const i=e.toString().toLowerCase();this.FiltroC=this.ClientesS.filter(o=>{var s;return null===(s=o.documento)||void 0===s?void 0:s.toString().toLowerCase().includes(i)}),0===this.FiltroC.length&&(this.FiltroC=[{nombre:"No hay coincidencias"}])}else this.FiltroC=[{nombre:"No hay coincidencias"}];return this.FiltroC}selectForQuery(e){this.forQuery=!0,localStorage.setItem("search",JSON.stringify(e)),this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.salesFilters=this.salesOrders.filter(i=>i.cliente===this.selectedItem.documento),this.salidaList=[],this.salesFilters.length>0&&this.salesFilters.forEach(i=>{const s=new Date(i.anio||1900,i.mes?i.mes-1:1,i.dia||1),d=this.ciudadesL.filter(c=>c.codigo===i.ciudad);this.salidaList.push({idpedidos:i.idpedidos,documento:this.selectedItem.documento||0,nombre:this.selectedItem.nombre||"",direccionEntrega:i.direccionEntrega||"",ciudad:i.ciudad||"",ciudadN:d[0].Ciudad||"",observaciones:i.observaciones||"",fecha:s})})}limpiarInfo(){this.selectedItem={},this.forLoad=!1,this.forQuery=!1,localStorage.removeItem("search"),this.miForm.reset(),this.miForm.disable(),this.editar=!1}loadOrders(){this.salesMng.getAllOrders().subscribe(e=>{if(e.salesOrders)return this.salesOrders=e.salesOrders[0],void(this.salesOrders=this.salesOrders.sort().reverse())})}loadCiudades(){this.dataM.getAllCities().subscribe(e=>{e.ciudades&&(this.ciudadesL=e.ciudades[0])})}loadAllClients(){this.clManager.getAllClients().subscribe(e=>{e.clientes&&(this.ClientesS=e.clientes[0])})}loadInfo(){this.forQuery?(this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.forLoad=!0):m().fire({text:"No has seleccionado un cliente aun",icon:"warning"})}loadForUpdate(e){var i,o,s,d,r,c;this.OrderForUpd=e,null===(i=this.miForm.get("direccionEntrega"))||void 0===i||i.setValue(e.direccionEntrega),null===(o=this.miForm.get("ciudad"))||void 0===o||o.setValue(e.ciudad),null===(s=this.miForm.get("cliente"))||void 0===s||s.setValue(e.documento),null===(d=this.miForm.get("fecha"))||void 0===d||d.setValue(e.fecha),null===(r=this.miForm.get("observaciones"))||void 0===r||r.setValue(e.observaciones),this.miForm.enable(),null===(c=this.miForm.get("cliente"))||void 0===c||c.disable(),this.forLoad=!1,this.editar=!0}ValidaCampo(e){return this.miForm.controls[e].errors&&this.miForm.controls[e].touched}editable(){this.editar=!0,this.miForm.enable()}cancelar(){this.editar=!1,this.criterio="",this.miForm.reset(),this.limpiarInfo()}pageEvent(e){this.p_Size=e.pageSize,this.page=e.pageIndex+1}createPedido(){var e,i,o,s;if(this.miForm.invalid)return void m().fire({icon:"info",title:"Oops...",text:"Hay cosas por corregir"}).then(g=>{this.miForm.markAllAsTouched()});const d=new Date(null===(e=this.miForm.get("fecha"))||void 0===e?void 0:e.value);let r=parseInt(d.getMonth().toString())+1;const c={idpedidos:this.OrderForUpd.idpedidos,cliente:this.OrderForUpd.documento,direccionEntrega:null===(i=this.miForm.get("direccionEntrega"))||void 0===i?void 0:i.value,ciudad:null===(o=this.miForm.get("ciudad"))||void 0===o?void 0:o.value,observaciones:(null===(s=this.miForm.get("observaciones"))||void 0===s?void 0:s.value)||"",dia:d.getDate(),mes:r,anio:d.getFullYear()};this.salesMng.updateOrder(c).subscribe(g=>{if(g.error){const u=g.error.errors[0].msg,h=g.error.errors[0].param||"";m().fire({icon:"error",title:"Oops..."+h,text:u})}else m().fire({icon:"success",title:"Actualizaci\xf3n correcta",text:g.statusDescription}).then(u=>{this.criterio="",this.miForm.reset(),this.salesOrders=[],this.loadOrders(),this.limpiarInfo()})})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l.qu),t.Y36(q),t.Y36(F.m),t.Y36(D.y))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-upd-pedidos"]],decls:18,vars:8,consts:[[1,"container"],[1,"example-form","form-floating","p-2","m-2"],[1,"m-3","example-full-width"],["type","text","placeholder","","aria-label","Documento cliente","matInput","",1,"example-full-width",3,"formControl","matAutocomplete","ngModel","ngModelChange","focus"],[1,"example-full-width"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",1,"m-2",3,"click"],["class","container",4,"ngIf"],["class","container form-control form-floating",4,"ngIf"],[3,"value","click"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],["aria-label","Select page",1,"m-3","example-full-width",3,"length","pageSize","pageSizeOptions","page"],["type","button",1,"btn","btn-warning","btn-sm",3,"click"],[1,"container","form-control","form-floating"],["action","",3,"formGroup"],[1,"form-floating","m-3"],["id","cliente","formControlName","cliente",1,"form-select"],["value","{{item.documento}",4,"ngFor","ngForOf"],["for","cliente"],["type","text","id","floatingInput","placeholder","Direcci\xf3n de entrega","formControlName","direccionEntrega",1,"form-control"],["for","floatingInput"],["class","form-text text-danger",4,"ngIf"],["id","ciudad","formControlName","ciudad",1,"form-select"],["value","{{ciudades.codigo}",4,"ngFor","ngForOf"],["for","ciudad"],["type","text","id","floatingInput","placeholder","Observaciones","formControlName","observaciones",1,"form-control"],["matInput","","placeholder","Fecha DD/MM/YYYY","formControlName","fecha",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["class","form-floating m-5 p-1",4,"ngIf"],["value","{{item.documento}"],[1,"form-text","text-danger"],["value","{{ciudades.codigo}"],[1,"form-floating","m-5","p-1"],[1,"float-md-end","m-3"],[1,"btn","btn-outline-success",3,"click"],[1,"btn","btn-outline-secondary",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Actualizaci\xf3n de pedidos"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",0)(5,"form",1)(6,"mat-form-field",2)(7,"mat-label"),t._uU(8,"Documento cliente"),t.qZA(),t.TgZ(9,"input",3),t.NdJ("ngModelChange",function(s){return i.criterio=s})("focus",function(){return i.limpiarInfo()}),t.qZA(),t.TgZ(10,"mat-autocomplete",4,5),t.YNc(12,nt,2,3,"mat-option",6),t.ALo(13,"async"),t.qZA()(),t.TgZ(14,"button",7),t.NdJ("click",function(){return i.loadInfo()}),t._uU(15,"Visualizar"),t.qZA()()(),t.YNc(16,ct,22,8,"div",8),t.YNc(17,_t,31,8,"div",9),t.qZA()),2&e){const o=t.MAs(11);t.xp6(9),t.Q6J("formControl",i.myControl)("matAutocomplete",o)("ngModel",i.criterio),t.xp6(3),t.Q6J("ngForOf",t.lcZ(13,6,i.filteredOptions)),t.xp6(4),t.Q6J("ngIf",i.forLoad),t.xp6(1),t.Q6J("ngIf",i.editar)}},directives:[l._Y,l.JL,l.F,f.KE,f.hX,O.Nt,l.Fj,b.ZL,l.JJ,l.oH,b.XC,p.sg,I.ey,L.lW,p.O5,P.NW,l.sg,l.EJ,l.u,l.YN,l.Kr,S.hl,S.nW,f.R9,S.Mq],pipes:[p.Ov,N,p.uU],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]}),a})();function vt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",10),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().selectForQuery(s)}),t._uU(1),t.qZA()}if(2&a){const e=n.$implicit;t.Q6J("value",e.documento),t.xp6(1),t.AsE(" ",e.documento," - ",e.nombre," ")}}function Zt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td")(15,"a",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).loadForUpdate(s)}),t._uU(16,"Eliminar"),t.qZA()()()}if(2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.idpedidos),t.xp6(2),t.AsE("",e.documento," - ",e.nombre,""),t.xp6(2),t.Oqu(e.direccionEntrega),t.xp6(2),t.Oqu(e.ciudadN),t.xp6(2),t.Oqu(e.observaciones),t.xp6(2),t.Oqu(t.lcZ(13,7,e.fecha))}}function bt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",0)(1,"table",11)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cliente"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Direcci\xf3n de entrega"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Ciudad"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Observaciones"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Fecha"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Acci\xf3n"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,Zt,17,9,"tr",12),t.ALo(20,"paginatorPipe"),t.qZA()(),t.TgZ(21,"mat-paginator",13),t.NdJ("page",function(o){return t.CHM(e),t.oxw().pageEvent(o)}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(19),t.Q6J("ngForOf",t.Dn7(20,4,e.salidaList,e.p_Size,e.page)),t.xp6(2),t.Q6J("length",e.salidaList.length)("pageSize",e.p_Size)("pageSizeOptions",e.optionsPage)}}function At(a,n){if(1&a&&(t.TgZ(0,"option",32),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.AsE("",e.documento," - ",e.nombre,"")}}function Tt(a,n){1&a&&(t.TgZ(0,"span",33),t._uU(1,"Este campo es obligatorio, mas de 3 caracteres"),t.qZA())}function Ut(a,n){if(1&a&&(t.TgZ(0,"option",34),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.Ciudad)}}function Ct(a,n){1&a&&(t.TgZ(0,"span",33),t._uU(1,"Este campo es obligatorio, mas de 3 caracteres"),t.qZA())}function xt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",35)(1,"div",36)(2,"button",37),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).deletePedido()}),t._uU(3,"Eliminar"),t.qZA()(),t.TgZ(4,"div",36)(5,"button",38),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).cancelar()}),t._uU(6,"Cancelar"),t.qZA()()()}}function qt(a,n){if(1&a&&(t.TgZ(0,"div",15)(1,"form",16)(2,"div",17)(3,"select",18),t.YNc(4,At,2,2,"option",19),t.qZA(),t.TgZ(5,"label",20),t._uU(6,"Cliente"),t.qZA()(),t.TgZ(7,"div",17),t._UZ(8,"input",21),t.TgZ(9,"label",22),t._uU(10,"Direcci\xf3n de entrega"),t.qZA(),t.YNc(11,Tt,2,0,"span",23),t.qZA(),t.TgZ(12,"div",17)(13,"select",24),t.YNc(14,Ut,2,1,"option",25),t.qZA(),t.TgZ(15,"label",26),t._uU(16,"Ciudad"),t.qZA()(),t.TgZ(17,"div",17),t._UZ(18,"input",27),t.TgZ(19,"label",22),t._uU(20,"Observaciones"),t.qZA(),t.YNc(21,Ct,2,0,"span",23),t.qZA(),t.TgZ(22,"div",17)(23,"mat-form-field")(24,"mat-label"),t._uU(25,"Fecha"),t.qZA(),t._UZ(26,"input",28)(27,"mat-datepicker-toggle",29)(28,"mat-datepicker",null,30),t.qZA()(),t.YNc(30,xt,7,0,"div",31),t.qZA()()),2&a){const e=t.MAs(29),i=t.oxw();t.xp6(1),t.Q6J("formGroup",i.miForm),t.xp6(3),t.Q6J("ngForOf",i.FiltroC),t.xp6(7),t.Q6J("ngIf",i.ValidaCampo("direccionEntrega")),t.xp6(3),t.Q6J("ngForOf",i.ciudadesL),t.xp6(7),t.Q6J("ngIf",i.ValidaCampo("observaciones")),t.xp6(5),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e),t.xp6(3),t.Q6J("ngIf",i.editar)}}let Ft=(()=>{class a{constructor(e,i,o,s){this.fb=e,this.salesMng=i,this.dataM=o,this.clManager=s,this.myControl=new l.NI,this.criterio="",this.ClientesS=[],this.FiltroC=[],this.forQuery=!1,this.forLoad=!1,this.ciudadesL=[],this.salesOrders=[],this.salesFilters=[],this.salidaList=[],this.editar=!1,this.miForm=this.fb.group({cliente:[,[l.kI.required]],direccionEntrega:["",[l.kI.required,l.kI.minLength(3)]],ciudad:[0,[l.kI.required]],observaciones:[""],fecha:[,[l.kI.required]]}),this.p_Size=5,this.page=1,this.optionsPage=[5,10,30,50]}ngOnInit(){this.loadCiudades(),this.loadAllClients(),this.loadOrders(),this.filteredOptions=this.myControl.valueChanges.pipe((0,Z.U)(e=>this._filter(e)))}_filter(e){if((0,x.b)(200),""!=this.criterio){const i=e.toString().toLowerCase();this.FiltroC=this.ClientesS.filter(o=>{var s;return null===(s=o.documento)||void 0===s?void 0:s.toString().toLowerCase().includes(i)}),0===this.FiltroC.length&&(this.FiltroC=[{nombre:"No hay coincidencias"}])}else this.FiltroC=[{nombre:"No hay coincidencias"}];return this.FiltroC}selectForQuery(e){this.forQuery=!0,localStorage.setItem("search",JSON.stringify(e)),this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.salesFilters=this.salesOrders.filter(i=>i.cliente===this.selectedItem.documento),this.salidaList=[],this.salesFilters.length>0&&this.salesFilters.forEach(i=>{const s=new Date(i.anio||1900,i.mes?i.mes-1:1,i.dia||1),d=this.ciudadesL.filter(c=>c.codigo===i.ciudad);this.salidaList.push({idpedidos:i.idpedidos,documento:this.selectedItem.documento||0,nombre:this.selectedItem.nombre||"",direccionEntrega:i.direccionEntrega||"",ciudad:i.ciudad||"",ciudadN:d[0].Ciudad||"",observaciones:i.observaciones||"",fecha:s})})}limpiarInfo(){this.selectedItem={},this.forLoad=!1,this.forQuery=!1,localStorage.removeItem("search"),this.miForm.reset(),this.miForm.disable(),this.editar=!1}loadOrders(){this.salesMng.getAllOrders().subscribe(e=>{if(e.salesOrders)return this.salesOrders=e.salesOrders[0],void(this.salesOrders=this.salesOrders.sort().reverse())})}loadCiudades(){this.dataM.getAllCities().subscribe(e=>{e.ciudades&&(this.ciudadesL=e.ciudades[0])})}loadAllClients(){this.clManager.getAllClients().subscribe(e=>{e.clientes&&(this.ClientesS=e.clientes[0])})}loadInfo(){this.forQuery?(this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.forLoad=!0):m().fire({text:"No has seleccionado un cliente aun",icon:"warning"})}loadForUpdate(e){var i,o,s,d,r,c;this.OrderForUpd=e,null===(i=this.miForm.get("direccionEntrega"))||void 0===i||i.setValue(e.direccionEntrega),null===(o=this.miForm.get("ciudad"))||void 0===o||o.setValue(e.ciudad),null===(s=this.miForm.get("cliente"))||void 0===s||s.setValue(e.documento),null===(d=this.miForm.get("fecha"))||void 0===d||d.setValue(e.fecha),null===(r=this.miForm.get("observaciones"))||void 0===r||r.setValue(e.observaciones),this.miForm.disable(),null===(c=this.miForm.get("cliente"))||void 0===c||c.disable(),this.forLoad=!1,this.editar=!0}ValidaCampo(e){return this.miForm.controls[e].errors&&this.miForm.controls[e].touched}editable(){this.editar=!0,this.miForm.disable()}cancelar(){this.editar=!1,this.criterio="",this.miForm.reset(),this.limpiarInfo()}pageEvent(e){this.p_Size=e.pageSize,this.page=e.pageIndex+1}deletePedido(){var e;if(this.miForm.invalid)return void m().fire({icon:"info",title:"Oops...",text:"Hay cosas por corregir"}).then(d=>{this.miForm.markAllAsTouched()});const i=new Date(null===(e=this.miForm.get("fecha"))||void 0===e?void 0:e.value);parseInt(i.getMonth().toString()),this.salesMng.deleteOrder({idpedidos:this.OrderForUpd.idpedidos}).subscribe(d=>{if(d.error){const r=d.error.errors[0].msg,c=d.error.errors[0].param||"";m().fire({icon:"error",title:"Oops..."+c,text:r})}else m().fire({icon:"success",title:"Eliminaci\xf3n correcta",text:d.statusDescription}).then(r=>{this.criterio="",this.miForm.reset(),this.salesOrders=[],this.loadOrders(),this.limpiarInfo()})})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l.qu),t.Y36(q),t.Y36(F.m),t.Y36(D.y))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-del-pedidos"]],decls:18,vars:8,consts:[[1,"container"],[1,"example-form","form-floating","p-2","m-2"],[1,"m-3","example-full-width"],["type","text","placeholder","","aria-label","Documento cliente","matInput","",1,"example-full-width",3,"formControl","matAutocomplete","ngModel","ngModelChange","focus"],[1,"example-full-width"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",1,"m-2",3,"click"],["class","container",4,"ngIf"],["class","container form-control form-floating",4,"ngIf"],[3,"value","click"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],["aria-label","Select page",1,"m-3","example-full-width",3,"length","pageSize","pageSizeOptions","page"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"container","form-control","form-floating"],["action","",3,"formGroup"],[1,"form-floating","m-3"],["id","cliente","formControlName","cliente",1,"form-select"],["value","{{item.documento}",4,"ngFor","ngForOf"],["for","cliente"],["type","text","id","floatingInput","placeholder","Direcci\xf3n de entrega","formControlName","direccionEntrega",1,"form-control"],["for","floatingInput"],["class","form-text text-danger",4,"ngIf"],["id","ciudad","formControlName","ciudad",1,"form-select"],["value","{{ciudades.codigo}",4,"ngFor","ngForOf"],["for","ciudad"],["type","text","id","floatingInput","placeholder","Observaciones","formControlName","observaciones",1,"form-control"],["matInput","","placeholder","Fecha DD/MM/YYYY","formControlName","fecha",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["class","form-floating m-5 p-1",4,"ngIf"],["value","{{item.documento}"],[1,"form-text","text-danger"],["value","{{ciudades.codigo}"],[1,"form-floating","m-5","p-1"],[1,"float-md-end","m-3"],[1,"btn","btn-outline-danger",3,"click"],[1,"btn","btn-outline-secondary",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Eliminaci\xf3n de pedidos"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",0)(5,"form",1)(6,"mat-form-field",2)(7,"mat-label"),t._uU(8,"Documento cliente"),t.qZA(),t.TgZ(9,"input",3),t.NdJ("ngModelChange",function(s){return i.criterio=s})("focus",function(){return i.limpiarInfo()}),t.qZA(),t.TgZ(10,"mat-autocomplete",4,5),t.YNc(12,vt,2,3,"mat-option",6),t.ALo(13,"async"),t.qZA()(),t.TgZ(14,"button",7),t.NdJ("click",function(){return i.loadInfo()}),t._uU(15,"Visualizar"),t.qZA()()(),t.YNc(16,bt,22,8,"div",8),t.YNc(17,qt,31,8,"div",9),t.qZA()),2&e){const o=t.MAs(11);t.xp6(9),t.Q6J("formControl",i.myControl)("matAutocomplete",o)("ngModel",i.criterio),t.xp6(3),t.Q6J("ngForOf",t.lcZ(13,6,i.filteredOptions)),t.xp6(4),t.Q6J("ngIf",i.forLoad),t.xp6(1),t.Q6J("ngIf",i.editar)}},directives:[l._Y,l.JL,l.F,f.KE,f.hX,O.Nt,l.Fj,b.ZL,l.JJ,l.oH,b.XC,p.sg,I.ey,L.lW,p.O5,P.NW,l.sg,l.EJ,l.u,l.YN,l.Kr,S.hl,S.nW,f.R9,S.Mq],pipes:[p.Ov,N,p.uU],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]}),a})();var y=v(7553);function Dt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",26),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().selectForQuery(s)}),t._uU(1),t.qZA()}if(2&a){const e=n.$implicit;t.Q6J("value",e.documento),t.xp6(1),t.AsE(" ",e.documento," - ",e.nombre," ")}}function Ot(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td",30),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td")(15,"a",31),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).loadForUpdate(s)}),t._uU(16,"Ver"),t.qZA()()()}if(2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.idpedidos),t.xp6(2),t.AsE("",e.documento," - ",e.nombre,""),t.xp6(2),t.Oqu(e.direccionEntrega),t.xp6(2),t.Oqu(e.ciudadN),t.xp6(2),t.Oqu(e.observaciones),t.xp6(2),t.Oqu(t.lcZ(13,7,e.fecha))}}function It(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",0)(1,"table",27)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cliente"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Direcci\xf3n de entrega"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Ciudad"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Observaciones"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Fecha"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Acci\xf3n"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,Ot,17,9,"tr",28),t.ALo(20,"paginatorPipe"),t.qZA()(),t.TgZ(21,"mat-paginator",29),t.NdJ("page",function(o){return t.CHM(e),t.oxw().pageEvent(o)}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(19),t.Q6J("ngForOf",t.Dn7(20,4,e.salidaList,e.p_Size,e.page)),t.xp6(2),t.Q6J("length",e.salidaList.length)("pageSize",e.p_Size)("pageSizeOptions",e.optionsPage)}}function Lt(a,n){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"number"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.ALo(21,"number"),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.ALo(24,"number"),t.qZA()()),2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.productoName),t.xp6(2),t.Oqu(e.cantidad),t.xp6(2),t.Oqu(e.precio),t.xp6(2),t.Oqu(e.impuesto),t.xp6(2),t.Oqu(e.descuento),t.xp6(2),t.Oqu(e.tipoProducto),t.xp6(2),t.Oqu(t.lcZ(15,10,e.subTotal)),t.xp6(3),t.Oqu(t.lcZ(18,12,e.subTotalImpuesto)),t.xp6(3),t.Oqu(t.lcZ(21,14,e.subTotalDescuento)),t.xp6(3),t.Oqu(t.lcZ(24,16,e.total))}}function St(a,n){if(1&a&&(t.TgZ(0,"div",38)(1,"table",39)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Producto"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cantidad"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Precio"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"% Impuesto"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"% Descuento"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Tipo producto"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Sub Total"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Sub Total Impuesto"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Sub Total Descuento"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Total"),t.qZA()()(),t.TgZ(24,"tbody"),t.YNc(25,Lt,25,18,"tr",28),t.TgZ(26,"tr")(27,"th",40),t._uU(28,"Totales"),t.qZA(),t._UZ(29,"td")(30,"td")(31,"td")(32,"td")(33,"td"),t.TgZ(34,"th"),t._uU(35),t.ALo(36,"number"),t.qZA(),t.TgZ(37,"th"),t._uU(38),t.ALo(39,"number"),t.qZA(),t.TgZ(40,"th"),t._uU(41),t.ALo(42,"number"),t.qZA(),t.TgZ(43,"th"),t._uU(44),t.ALo(45,"number"),t.qZA()()()()()),2&a){const e=t.oxw(2);t.xp6(25),t.Q6J("ngForOf",e.detalleL),t.xp6(10),t.Oqu(t.lcZ(36,5,e.totales.sub)),t.xp6(3),t.Oqu(t.lcZ(39,7,e.totales.subImpuesto)),t.xp6(3),t.Oqu(t.lcZ(42,9,e.totales.subDescuento)),t.xp6(3),t.Oqu(t.lcZ(45,11,e.totales.total))}}function Pt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",0)(1,"table",32)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Pedido"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cliente"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Agregar Producto"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Agregar Servicio"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Guardar"),t.qZA()()(),t.TgZ(14,"tbody")(15,"tr")(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td")(21,"a",33),t.NdJ("click",function(){return t.CHM(e),t.oxw().tipoP()}),t.TgZ(22,"span",34),t._uU(23,"add_circle_outline"),t.qZA()()(),t.TgZ(24,"td")(25,"a",33),t.NdJ("click",function(){return t.CHM(e),t.oxw().tipoS()}),t.TgZ(26,"span",35),t._uU(27,"add_circle_outline"),t.qZA()()(),t.TgZ(28,"td")(29,"button",36),t.NdJ("click",function(){return t.CHM(e),t.oxw().crearDetalle()}),t._uU(30,"Guardar"),t.qZA()()()()(),t.YNc(31,St,46,13,"div",37),t.qZA()}if(2&a){const e=t.oxw();t.xp6(17),t.Oqu(e.OrderForUpd.idpedidos),t.xp6(2),t.AsE("",e.OrderForUpd.documento," - ",e.OrderForUpd.nombre,""),t.xp6(12),t.Q6J("ngIf",e.detalleL.length>0)}}function Nt(a,n){if(1&a&&(t.TgZ(0,"option",44),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.s9C("value",e.idProductos),t.xp6(1),t.Oqu(e.producto)}}function yt(a,n){if(1&a&&(t.TgZ(0,"div",19)(1,"select",41),t.YNc(2,Nt,2,2,"option",42),t.qZA(),t.TgZ(3,"label",43),t._uU(4,"Producto"),t.qZA()()),2&a){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.productosL)}}function Mt(a,n){if(1&a&&(t.TgZ(0,"option",44),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.s9C("value",e.idServicios),t.xp6(1),t.Oqu(e.servicio)}}function wt(a,n){if(1&a&&(t.TgZ(0,"div",19)(1,"select",45),t.YNc(2,Mt,2,2,"option",42),t.qZA(),t.TgZ(3,"label",43),t._uU(4,"Servicio"),t.qZA()()),2&a){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.serviciosL)}}function Jt(a,n){1&a&&(t.TgZ(0,"span",46),t._uU(1,"Este campo es obligatorio, mas de 1 unidad"),t.qZA())}let J=(()=>{class a{constructor(e,i,o,s,d,r){this.salesMng=e,this.aRute=i,this.fb=o,this.clManager=s,this.dataM=d,this.stManager=r,this.myControl=new l.NI,this.criterio="",this.ClientesS=[],this.FiltroC=[],this.forQuery=!1,this.forLoad=!1,this.ciudadesL=[],this.salesOrdersL=[],this.salesFilters=[],this.salidaList=[],this.editar=!1,this.detalleL=[],this.productosL=[],this.serviciosL=[],this.detalleInvL=[],this.viewInvL=[],this.tipoPS="",this.totales={sub:0,subImpuesto:0,subDescuento:0,total:0},this.p_Size=5,this.page=1,this.optionsPage=[5,10,30,50],this.pSizeD=5,this.pageD=1,this.optionsPageD=[5,10,30,50],this.miForm=this.fb.group({productoD:[],servicioD:[],cantidad:[1,[l.kI.required,l.kI.min(1)]]}),this.idPedido=0}ngOnInit(){this.salesMng.getDetalles().subscribe(e=>{if(this.detalleL=e,this.detalleL.length>0){let i=0,o=0,s=0,d=0;this.detalleL.forEach(r=>{i+=r.subTotal||0,o+=r.subTotalImpuesto||0,s+=r.subTotalDescuento||0,d+=r.total||0}),this.totales={sub:i,subImpuesto:o,subDescuento:s,total:d}}}),this.loadAllClients(),this.loadCiudades(),this.loadProductos(),this.loadServicios(),this.loadDetalleInv(),this.idPedido=this.salesMng.IdPedido,this.loadOrders(),this.filteredOptions=this.myControl.valueChanges.pipe((0,Z.U)(e=>this._filter(e)))}loadOrders(){this.salesMng.getAllOrders().subscribe(e=>{if(e.salesOrders)return this.salesOrdersL=e.salesOrders[0],this.salesOrdersL=this.salesOrdersL.sort().reverse(),void this.loadPedido()})}loadPedido(){this.idPedido&&this.idPedido>0&&(this.pedido=this.salesOrdersL.filter(e=>e.idpedidos===this.idPedido),this.generateVPedido())}_filter(e){if((0,x.b)(200),""!=this.criterio){const i=e.toString().toLowerCase();this.FiltroC=this.ClientesS.filter(o=>{var s;return null===(s=o.documento)||void 0===s?void 0:s.toString().toLowerCase().includes(i)}),0===this.FiltroC.length&&(this.FiltroC=[{nombre:"No hay coincidencias"}])}else this.FiltroC=[{nombre:"No hay coincidencias"}];return this.FiltroC}loadProductos(){this.stManager.getAllProducts().subscribe(e=>{e.productos&&(this.productosL=e.productos[0])})}loadServicios(){this.stManager.getAllServicios().subscribe(e=>{e.servicios&&(this.serviciosL=e.servicios[0])})}selectForQuery(e){this.forQuery=!0,localStorage.setItem("search",JSON.stringify(e)),this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.salesFilters=this.salesOrdersL.filter(i=>i.cliente===this.selectedItem.documento),this.salidaList=[],this.salesFilters.length>0&&this.salesFilters.forEach(i=>{const s=new Date(i.anio||1900,(i.mes||1)-1,i.dia||1),d=this.ciudadesL.filter(c=>c.codigo===i.ciudad);this.salidaList.push({idpedidos:i.idpedidos,documento:this.selectedItem.documento||0,nombre:this.selectedItem.nombre||"",direccionEntrega:i.direccionEntrega||"",ciudad:i.ciudad||"",ciudadN:d[0].Ciudad||"",observaciones:i.observaciones||"",fecha:s})})}limpiarInfo(){this.selectedItem={},this.forLoad=!1,this.forQuery=!1,localStorage.removeItem("search"),this.miForm.reset(),this.editar=!1,this.salesMng.clearDetalle(),this.totales={sub:0,subImpuesto:0,subDescuento:0,total:0}}loadAllClients(){this.clManager.getAllClients().subscribe(e=>{e.clientes&&(this.ClientesS=e.clientes[0])})}loadInfo(){this.forQuery?(this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.forLoad=!0):m().fire({text:"No has seleccionado un cliente aun",icon:"warning"})}generateVPedido(){this.salesFilters=this.salesOrdersL.filter(i=>i.idpedidos===this.pedido[0].idpedidos);const e=this.ClientesS.filter(i=>i.documento===this.pedido[0].cliente);this.selectedItem=e[0],this.salesFilters.length>0&&this.salesFilters.forEach(i=>{const s=new Date(i.anio||1900,(i.mes?i.mes:1)-1,i.dia||1),d=this.ciudadesL.filter(c=>c.codigo===i.ciudad);this.salidaList.push({idpedidos:i.idpedidos,documento:this.selectedItem.documento||0,nombre:this.selectedItem.nombre||"",direccionEntrega:i.direccionEntrega||"",ciudad:i.ciudad||"",ciudadN:d[0].Ciudad||"",observaciones:i.observaciones||"",fecha:s})}),this.loadForUpdate(this.salidaList[0]),this.editar=!0}loadForUpdate(e){this.OrderForUpd=e,this.forLoad=!1,this.editar=!0}ValidaCampo(e){return this.miForm.controls[e].errors&&this.miForm.controls[e].touched}editable(){this.editar=!0}cancelar(){this.editar=!1,this.criterio="",this.miForm.reset(),this.limpiarInfo()}loadCiudades(){this.dataM.getAllCities().subscribe(e=>{e.ciudades&&(this.ciudadesL=e.ciudades[0])})}loadDetalleInv(){this.salesMng.viewInventario().subscribe(e=>{e.detalleInv&&(this.detalleInvL=e.detalleInv[0])})}pageEvent(e){this.p_Size=e.pageSize,this.page=e.pageIndex+1}tipoP(){this.tipoPS="P"}tipoS(){this.tipoPS="S"}agregarDetalle(){var e,i,o,s,d;let r;const c={};if("P"===this.tipoPS){r=null===(e=this.miForm.get("productoD"))||void 0===e?void 0:e.value;const h=this.detalleInvL.filter(Ge=>Ge.idProductos==r);if((h[0].stock||0)-((null===(i=this.miForm.get("cantidad"))||void 0===i?void 0:i.value)||0)<0)return void m().fire({icon:"error",title:"Oops...",text:"El inventario del articulo no alcanza para vender esta cantidad"});c.productoName=h[0].producto,c.precio=h[0].PrecioVenta,c.impuesto=h[0].impuesto,c.producto=r,c.descuento=h[0].descuento}else if("S"===this.tipoPS){r=null===(o=this.miForm.get("servicioD"))||void 0===o?void 0:o.value;const h=this.serviciosL.filter(k=>k.idServicios==r);c.productoName=h[0].servicio,c.precio=h[0].precio,c.impuesto=h[0].impuesto,c.producto=r,c.descuento=h[0].descuento}const g=this.OrderForUpd.fecha;c.cantidad=null===(s=this.miForm.get("cantidad"))||void 0===s?void 0:s.value,c.clienteDoc=this.OrderForUpd.documento,c.clienteName=this.OrderForUpd.nombre,c.ciudad=this.OrderForUpd.ciudad,c.ciudadName=this.OrderForUpd.ciudadN,c.pedido=this.OrderForUpd.idpedidos,c.tipoProducto=this.tipoPS,c.subTotal=(c.precio||0)*(c.cantidad||0),c.subTotalImpuesto=(c.precio||0)*((c.impuesto||0)/100)*(c.cantidad||0),c.subTotalDescuento=(c.precio||0)*((c.descuento||0)/100)*(c.cantidad||0),c.total=(c.subTotal||0)+(c.subTotalImpuesto||0)-(c.subTotalDescuento||0),c.anio=g.getFullYear();let u=g.getMonth()||1;c.mes=u+1,c.dia=g.getDate(),this.salesMng.addDetalle(c),null===(d=this.miForm.get("cantidad"))||void 0===d||d.setValue(1)}crearDetalle(){const e=[];this.detalleL.forEach(i=>{e.push({producto:i.producto||void 0,cantidad:i.cantidad,precio:i.precio,impuesto:i.impuesto,cliente:i.clienteDoc,ciudad:i.ciudad,pedido:i.pedido,tipoProducto:i.tipoProducto,dia:i.dia,mes:i.mes,anio:i.anio,descuento:i.descuento})}),this.salesMng.bulkDetalles(e).subscribe(i=>{if(i.error){const o=i.error.errors[0].msg,s=i.error.errors[0].param||"";m().fire({icon:"error",title:"Oops..."+s,text:o})}else m().fire({icon:"success",title:"Creaci\xf3n correcta",text:i.statusDescription}).then(o=>{this.forLoad=!1,this.criterio="",this.limpiarInfo()})})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(q),t.Y36(C.gz),t.Y36(l.qu),t.Y36(D.y),t.Y36(F.m),t.Y36(y.G))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-detalles"]],decls:40,vars:12,consts:[[1,"container"],[1,"example-form","form-floating","p-2","m-2"],[1,"m-3","example-full-width"],["type","text","placeholder","","aria-label","Documento cliente","matInput","",1,"example-full-width",3,"formControl","matAutocomplete","ngModel","ngModelChange","focus"],[1,"example-full-width"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",1,"m-2",3,"click"],["class","container",4,"ngIf"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"form-control","form-floating"],["action","",3,"formGroup"],["class","form-floating m-3",4,"ngIf"],[1,"form-floating","m-3"],["type","number","id","floatingInput","placeholder","Cantidad","formControlName","cantidad",1,"form-control"],["for","floatingInput"],["class","form-text text-danger",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],[3,"value","click"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],["aria-label","Select page",1,"m-3","example-full-width",3,"length","pageSize","pageSizeOptions","page"],[1,"col-1"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"table","table-striped","table-hover","w-50"],["type","button","data-bs-toggle","modal","data-bs-target","#staticBackdrop",3,"click"],[1,"material-icons","bi","md-48","bg-warning","rounded-circle"],[1,"material-icons","bi","md-48","bg-secondary","rounded-circle"],[1,"btn","btn-success","small",3,"click"],["class","w-100",4,"ngIf"],[1,"w-100"],[1,"table","table-striped","table-hover","w-100"],["rowspan","6"],["id","productoD","formControlName","productoD",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","tipodocumento"],[3,"value"],["id","servicioD","formControlName","servicioD",1,"form-select"],[1,"form-text","text-danger"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Creaci\xf3n detalle de pedidos"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",0)(5,"form",1)(6,"mat-form-field",2)(7,"mat-label"),t._uU(8,"Documento cliente"),t.qZA(),t.TgZ(9,"input",3),t.NdJ("ngModelChange",function(s){return i.criterio=s})("focus",function(){return i.limpiarInfo()}),t.qZA(),t.TgZ(10,"mat-autocomplete",4,5),t.YNc(12,Dt,2,3,"mat-option",6),t.ALo(13,"async"),t.qZA()(),t.TgZ(14,"button",7),t.NdJ("click",function(){return i.loadInfo()}),t._uU(15,"Visualizar"),t.qZA()()(),t.YNc(16,It,22,8,"div",8),t.YNc(17,Pt,32,4,"div",8),t.TgZ(18,"div",9)(19,"div",10)(20,"div",11)(21,"div",12)(22,"h5",13),t._uU(23,"Detalle de pedido"),t.qZA(),t._UZ(24,"button",14),t.qZA(),t.TgZ(25,"div",15)(26,"div",16)(27,"form",17),t.YNc(28,yt,5,1,"div",18),t.YNc(29,wt,5,1,"div",18),t.TgZ(30,"div",19),t._UZ(31,"input",20),t.TgZ(32,"label",21),t._uU(33,"Cantidad"),t.qZA(),t.YNc(34,Jt,2,0,"span",22),t.qZA()()()(),t.TgZ(35,"div",23)(36,"button",24),t._uU(37,"Cancelar"),t.qZA(),t.TgZ(38,"button",25),t.NdJ("click",function(){return i.agregarDetalle()}),t._uU(39,"Agregar"),t.qZA()()()()()()),2&e){const o=t.MAs(11);t.xp6(9),t.Q6J("formControl",i.myControl)("matAutocomplete",o)("ngModel",i.criterio),t.xp6(3),t.Q6J("ngForOf",t.lcZ(13,10,i.filteredOptions)),t.xp6(4),t.Q6J("ngIf",i.forLoad),t.xp6(1),t.Q6J("ngIf",i.editar),t.xp6(10),t.Q6J("formGroup",i.miForm),t.xp6(1),t.Q6J("ngIf","P"===i.tipoPS),t.xp6(1),t.Q6J("ngIf","S"===i.tipoPS),t.xp6(5),t.Q6J("ngIf",i.ValidaCampo("cantidad"))}},directives:[l._Y,l.JL,l.F,f.KE,f.hX,O.Nt,l.Fj,b.ZL,l.JJ,l.oH,b.XC,p.sg,I.ey,L.lW,p.O5,P.NW,l.sg,l.EJ,l.u,l.YN,l.Kr,l.wV],pipes:[p.Ov,N,p.uU,p.JJ],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]}),a})();function kt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().selectForQuery(s)}),t._uU(1),t.qZA()}if(2&a){const e=n.$implicit;t.Q6J("value",e.documento),t.xp6(1),t.AsE(" ",e.documento," - ",e.nombre," ")}}function Et(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td",13),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td")(15,"a",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).loadForUpdate(s)}),t._uU(16,"Ver"),t.qZA()()()}if(2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.idpedidos),t.xp6(2),t.AsE("",e.documento," - ",e.nombre,""),t.xp6(2),t.Oqu(e.direccionEntrega),t.xp6(2),t.Oqu(e.ciudadN),t.xp6(2),t.Oqu(e.observaciones),t.xp6(2),t.Oqu(t.lcZ(13,7,e.fecha))}}function zt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",0)(1,"table",10)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cliente"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Direcci\xf3n de entrega"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Ciudad"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Observaciones"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Fecha"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Acci\xf3n"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,Et,17,9,"tr",11),t.ALo(20,"paginatorPipe"),t.qZA()(),t.TgZ(21,"mat-paginator",12),t.NdJ("page",function(o){return t.CHM(e),t.oxw().pageEvent(o)}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(19),t.Q6J("ngForOf",t.Dn7(20,4,e.salidaList,e.p_Size,e.page)),t.xp6(2),t.Q6J("length",e.salidaList.length)("pageSize",e.p_Size)("pageSizeOptions",e.optionsPage)}}function Qt(a,n){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"number"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.ALo(21,"number"),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.ALo(24,"number"),t.qZA()()),2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.productoName),t.xp6(2),t.Oqu(e.cantidad),t.xp6(2),t.Oqu(e.precio),t.xp6(2),t.Oqu(e.impuesto),t.xp6(2),t.Oqu(e.descuento),t.xp6(2),t.Oqu(e.tipoProducto),t.xp6(2),t.Oqu(t.lcZ(15,10,e.subTotal)),t.xp6(3),t.Oqu(t.lcZ(18,12,e.subTotalImpuesto)),t.xp6(3),t.Oqu(t.lcZ(21,14,e.subTotalDescuento)),t.xp6(3),t.Oqu(t.lcZ(24,16,e.total))}}function Yt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",17)(1,"table",18)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Producto"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cantidad"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Precio"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"% Impuesto"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"% Descuento"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Tipo producto"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Sub Total"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Sub Total Impuesto"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Sub Total Descuento"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Total"),t.qZA()()(),t.TgZ(24,"tbody"),t.YNc(25,Qt,25,18,"tr",11),t.ALo(26,"paginatorPipe"),t.TgZ(27,"tr")(28,"th",19),t._uU(29,"Totales"),t.qZA(),t._UZ(30,"td")(31,"td")(32,"td")(33,"td")(34,"td"),t.TgZ(35,"th"),t._uU(36),t.ALo(37,"number"),t.qZA(),t.TgZ(38,"th"),t._uU(39),t.ALo(40,"number"),t.qZA(),t.TgZ(41,"th"),t._uU(42),t.ALo(43,"number"),t.qZA(),t.TgZ(44,"th"),t._uU(45),t.ALo(46,"number"),t.qZA()()()(),t.TgZ(47,"mat-paginator",20),t.NdJ("page",function(o){return t.CHM(e),t.oxw(2).pageEventD(o)}),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(25),t.Q6J("ngForOf",t.Dn7(26,8,e.detalleL,e.pSize,e.pageD)),t.xp6(11),t.Oqu(t.lcZ(37,12,e.totales.sub)),t.xp6(3),t.Oqu(t.lcZ(40,14,e.totales.subImpuesto)),t.xp6(3),t.Oqu(t.lcZ(43,16,e.totales.subDescuento)),t.xp6(3),t.Oqu(t.lcZ(46,18,e.totales.total)),t.xp6(2),t.Q6J("length",e.detalleL.length)("pageSize",e.pSize)("pageSizeOptions",e.optionsPageD)}}function Vt(a,n){if(1&a&&(t.TgZ(0,"div",0)(1,"table",15)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Pedido"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cliente"),t.qZA()()(),t.TgZ(8,"tbody")(9,"tr")(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA()()()(),t.YNc(14,Yt,48,20,"div",16),t.qZA()),2&a){const e=t.oxw();t.xp6(11),t.Oqu(e.OrderForUpd.idpedidos),t.xp6(2),t.AsE("",e.OrderForUpd.documento," - ",e.OrderForUpd.nombre,""),t.xp6(1),t.Q6J("ngIf",e.detalleL.length>0)}}function Ht(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",25),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().selectForQuery(s)}),t._uU(1),t.qZA()}if(2&a){const e=n.$implicit;t.Q6J("value",e.documento),t.xp6(1),t.AsE(" ",e.documento," - ",e.nombre," ")}}function Xt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td",29),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td")(15,"a",30),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).loadForUpdate(s)}),t._uU(16,"Ver"),t.qZA()()()}if(2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.idpedidos),t.xp6(2),t.AsE("",e.documento," - ",e.nombre,""),t.xp6(2),t.Oqu(e.direccionEntrega),t.xp6(2),t.Oqu(e.ciudadN),t.xp6(2),t.Oqu(e.observaciones),t.xp6(2),t.Oqu(t.lcZ(13,7,e.fecha))}}function Bt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",0)(1,"table",26)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cliente"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Direcci\xf3n de entrega"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Ciudad"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Observaciones"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Fecha"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Acci\xf3n"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,Xt,17,9,"tr",27),t.ALo(20,"paginatorPipe"),t.qZA()(),t.TgZ(21,"mat-paginator",28),t.NdJ("page",function(o){return t.CHM(e),t.oxw().pageEvent(o)}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(19),t.Q6J("ngForOf",t.Dn7(20,4,e.salidaList,e.p_Size,e.page)),t.xp6(2),t.Q6J("length",e.salidaList.length)("pageSize",e.p_Size)("pageSizeOptions",e.optionsPage)}}function Gt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"a",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(3).selectUpdate(o)}),t.TgZ(2,"span",39),t._uU(3,"edit"),t.qZA()()()}}function Kt(a,n){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"number"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.ALo(21,"number"),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.ALo(24,"number"),t.qZA(),t.TgZ(25,"td"),t.YNc(26,Gt,4,0,"div",37),t.qZA()()),2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.productoName),t.xp6(2),t.Oqu(e.cantidad),t.xp6(2),t.Oqu(e.precio),t.xp6(2),t.Oqu(e.impuesto),t.xp6(2),t.Oqu(e.descuento),t.xp6(2),t.Oqu(e.tipoProducto),t.xp6(2),t.Oqu(t.lcZ(15,11,e.subTotal)),t.xp6(3),t.Oqu(t.lcZ(18,13,e.subTotalImpuesto)),t.xp6(3),t.Oqu(t.lcZ(21,15,e.subTotalDescuento)),t.xp6(3),t.Oqu(t.lcZ(24,17,e.total)),t.xp6(3),t.Q6J("ngIf","P"==e.tipoProducto)}}function Wt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",33)(1,"table",34)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Producto"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cantidad"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Precio"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"% Impuesto"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"% Descuento"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Tipo producto"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Sub Total"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Sub Total Impuesto"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Sub Total Descuento"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Total"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Editar"),t.qZA()()(),t.TgZ(26,"tbody"),t.YNc(27,Kt,27,19,"tr",27),t.ALo(28,"paginatorPipe"),t.TgZ(29,"tr")(30,"th",35),t._uU(31,"Totales"),t.qZA(),t._UZ(32,"td")(33,"td")(34,"td")(35,"td")(36,"td"),t.TgZ(37,"th"),t._uU(38),t.ALo(39,"number"),t.qZA(),t.TgZ(40,"th"),t._uU(41),t.ALo(42,"number"),t.qZA(),t.TgZ(43,"th"),t._uU(44),t.ALo(45,"number"),t.qZA(),t.TgZ(46,"th"),t._uU(47),t.ALo(48,"number"),t.qZA(),t._UZ(49,"td"),t.qZA()()(),t.TgZ(50,"mat-paginator",36),t.NdJ("page",function(o){return t.CHM(e),t.oxw(2).pageEventD(o)}),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(27),t.Q6J("ngForOf",t.Dn7(28,8,e.detalleL,e.pSize,e.pageD)),t.xp6(11),t.Oqu(t.lcZ(39,12,e.totales.sub)),t.xp6(3),t.Oqu(t.lcZ(42,14,e.totales.subImpuesto)),t.xp6(3),t.Oqu(t.lcZ(45,16,e.totales.subDescuento)),t.xp6(3),t.Oqu(t.lcZ(48,18,e.totales.total)),t.xp6(3),t.Q6J("length",e.detalleL.length)("pageSize",e.pSize)("pageSizeOptions",e.optionsPageD)}}function jt(a,n){if(1&a&&(t.TgZ(0,"div",0)(1,"table",31)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Pedido"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cliente"),t.qZA()()(),t.TgZ(8,"tbody")(9,"tr")(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA()()()(),t.YNc(14,Wt,51,20,"div",32),t.qZA()),2&a){const e=t.oxw();t.xp6(11),t.Oqu(e.OrderForUpd.idpedidos),t.xp6(2),t.AsE("",e.OrderForUpd.documento," - ",e.OrderForUpd.nombre,""),t.xp6(1),t.Q6J("ngIf",e.detalleL.length>0)}}function Rt(a,n){1&a&&(t.TgZ(0,"span",40),t._uU(1,"Este campo es obligatorio, mas de 1 unidad"),t.qZA())}function ee(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",22),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().selectForQuery(s)}),t._uU(1),t.qZA()}if(2&a){const e=n.$implicit;t.Q6J("value",e.documento),t.xp6(1),t.AsE(" ",e.documento," - ",e.nombre," ")}}function ie(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td",26),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td")(15,"a",27),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).loadForUpdate(s)}),t._uU(16,"Ver"),t.qZA()()()}if(2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.idpedidos),t.xp6(2),t.AsE("",e.documento," - ",e.nombre,""),t.xp6(2),t.Oqu(e.direccionEntrega),t.xp6(2),t.Oqu(e.ciudadN),t.xp6(2),t.Oqu(e.observaciones),t.xp6(2),t.Oqu(t.lcZ(13,7,e.fecha))}}function oe(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",0)(1,"table",23)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cliente"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Direcci\xf3n de entrega"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Ciudad"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Observaciones"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Fecha"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Acci\xf3n"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,ie,17,9,"tr",24),t.ALo(20,"paginatorPipe"),t.qZA()(),t.TgZ(21,"mat-paginator",25),t.NdJ("page",function(o){return t.CHM(e),t.oxw().pageEvent(o)}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(19),t.Q6J("ngForOf",t.Dn7(20,4,e.salidaList,e.p_Size,e.page)),t.xp6(2),t.Q6J("length",e.salidaList.length)("pageSize",e.p_Size)("pageSizeOptions",e.optionsPage)}}function se(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"a",34),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(3).selectUpdate(o)}),t.TgZ(2,"span",35),t._uU(3,"delete"),t.qZA()()()}}function ae(a,n){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"number"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.ALo(21,"number"),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.ALo(24,"number"),t.qZA(),t.TgZ(25,"td"),t.YNc(26,se,4,0,"div",18),t.qZA()()),2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.productoName),t.xp6(2),t.Oqu(e.cantidad),t.xp6(2),t.Oqu(e.precio),t.xp6(2),t.Oqu(e.impuesto),t.xp6(2),t.Oqu(e.descuento),t.xp6(2),t.Oqu(e.tipoProducto),t.xp6(2),t.Oqu(t.lcZ(15,11,e.subTotal)),t.xp6(3),t.Oqu(t.lcZ(18,13,e.subTotalImpuesto)),t.xp6(3),t.Oqu(t.lcZ(21,15,e.subTotalDescuento)),t.xp6(3),t.Oqu(t.lcZ(24,17,e.total)),t.xp6(3),t.Q6J("ngIf","P"==e.tipoProducto)}}function re(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",30)(1,"table",31)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Producto"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cantidad"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Precio"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"% Impuesto"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"% Descuento"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Tipo producto"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Sub Total"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Sub Total Impuesto"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Sub Total Descuento"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Total"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Eliminar"),t.qZA()()(),t.TgZ(26,"tbody"),t.YNc(27,ae,27,19,"tr",24),t.ALo(28,"paginatorPipe"),t.TgZ(29,"tr")(30,"th",32),t._uU(31,"Totales"),t.qZA(),t._UZ(32,"td")(33,"td")(34,"td")(35,"td")(36,"td"),t.TgZ(37,"th"),t._uU(38),t.ALo(39,"number"),t.qZA(),t.TgZ(40,"th"),t._uU(41),t.ALo(42,"number"),t.qZA(),t.TgZ(43,"th"),t._uU(44),t.ALo(45,"number"),t.qZA(),t.TgZ(46,"th"),t._uU(47),t.ALo(48,"number"),t.qZA(),t._UZ(49,"td"),t.qZA()()(),t.TgZ(50,"mat-paginator",33),t.NdJ("page",function(o){return t.CHM(e),t.oxw(2).pageEventD(o)}),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(27),t.Q6J("ngForOf",t.Dn7(28,8,e.detalleL,e.pSize,e.pageD)),t.xp6(11),t.Oqu(t.lcZ(39,12,e.totales.sub)),t.xp6(3),t.Oqu(t.lcZ(42,14,e.totales.subImpuesto)),t.xp6(3),t.Oqu(t.lcZ(45,16,e.totales.subDescuento)),t.xp6(3),t.Oqu(t.lcZ(48,18,e.totales.total)),t.xp6(3),t.Q6J("length",e.detalleL.length)("pageSize",e.pSize)("pageSizeOptions",e.optionsPageD)}}function de(a,n){if(1&a&&(t.TgZ(0,"div",0)(1,"table",28)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Pedido"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cliente"),t.qZA()()(),t.TgZ(8,"tbody")(9,"tr")(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA()()()(),t.YNc(14,re,51,20,"div",29),t.qZA()),2&a){const e=t.oxw();t.xp6(11),t.Oqu(e.OrderForUpd.idpedidos),t.xp6(2),t.AsE("",e.OrderForUpd.documento," - ",e.OrderForUpd.nombre,""),t.xp6(1),t.Q6J("ngIf",e.detalleL.length>0)}}function ne(a,n){if(1&a&&(t.TgZ(0,"div")(1,"h2"),t._uU(2,"Precauci\xf3n"),t.qZA(),t.TgZ(3,"pre"),t._uU(4),t.qZA()()),2&a){const e=t.oxw();t.xp6(4),t.hij("Recuerde que al eliminar el detalle en inventario del producto incrementara seg\xfan la cantidad,\n                                para este caso en ",e.vistaDetalleUpdate.cantidad," unidades")}}function ce(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",26),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().selectForQuery(s)}),t._uU(1),t.qZA()}if(2&a){const e=n.$implicit;t.Q6J("value",e.documento),t.xp6(1),t.AsE(" ",e.documento," - ",e.nombre," ")}}function ue(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td",30),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td")(15,"a",31),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).loadForUpdate(s)}),t._uU(16,"Ver"),t.qZA()()()}if(2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.idpedidos),t.xp6(2),t.AsE("",e.documento," - ",e.nombre,""),t.xp6(2),t.Oqu(e.direccionEntrega),t.xp6(2),t.Oqu(e.ciudadN),t.xp6(2),t.Oqu(e.observaciones),t.xp6(2),t.Oqu(t.lcZ(13,7,e.fecha))}}function pe(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",0)(1,"table",27)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cliente"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Direcci\xf3n de entrega"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Ciudad"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Observaciones"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Fecha"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Acci\xf3n"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,ue,17,9,"tr",28),t.ALo(20,"paginatorPipe"),t.qZA()(),t.TgZ(21,"mat-paginator",29),t.NdJ("page",function(o){return t.CHM(e),t.oxw().pageEvent(o)}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(19),t.Q6J("ngForOf",t.Dn7(20,4,e.salidaList,e.p_Size,e.page)),t.xp6(2),t.Q6J("length",e.salidaList.length)("pageSize",e.p_Size)("pageSizeOptions",e.optionsPage)}}function he(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"a",39),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(3).selectUpdate(o)}),t.TgZ(2,"span",40),t._uU(3,"undo"),t.qZA()()()}}function me(a,n){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"number"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.ALo(21,"number"),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.ALo(24,"number"),t.qZA(),t.TgZ(25,"td"),t.YNc(26,he,4,0,"div",38),t.qZA()()),2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.productoName),t.xp6(2),t.Oqu(e.cantidad),t.xp6(2),t.Oqu(e.precio),t.xp6(2),t.Oqu(e.impuesto),t.xp6(2),t.Oqu(e.descuento),t.xp6(2),t.Oqu(e.tipoProducto),t.xp6(2),t.Oqu(t.lcZ(15,11,e.subTotal)),t.xp6(3),t.Oqu(t.lcZ(18,13,e.subTotalImpuesto)),t.xp6(3),t.Oqu(t.lcZ(21,15,e.subTotalDescuento)),t.xp6(3),t.Oqu(t.lcZ(24,17,e.total)),t.xp6(3),t.Q6J("ngIf","P"==e.tipoProducto)}}function ge(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",34)(1,"table",35)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Producto"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cantidad"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Precio"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"% Impuesto"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"% Descuento"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Tipo producto"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Sub Total"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Sub Total Impuesto"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Sub Total Descuento"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Total"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Agregar devoluci\xf3n"),t.qZA()()(),t.TgZ(26,"tbody"),t.YNc(27,me,27,19,"tr",28),t.ALo(28,"paginatorPipe"),t.TgZ(29,"tr")(30,"th",36),t._uU(31,"Totales"),t.qZA(),t._UZ(32,"td")(33,"td")(34,"td")(35,"td")(36,"td"),t.TgZ(37,"th"),t._uU(38),t.ALo(39,"number"),t.qZA(),t.TgZ(40,"th"),t._uU(41),t.ALo(42,"number"),t.qZA(),t.TgZ(43,"th"),t._uU(44),t.ALo(45,"number"),t.qZA(),t.TgZ(46,"th"),t._uU(47),t.ALo(48,"number"),t.qZA(),t._UZ(49,"td"),t.qZA()()(),t.TgZ(50,"mat-paginator",37),t.NdJ("page",function(o){return t.CHM(e),t.oxw(2).pageEventD(o)}),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(27),t.Q6J("ngForOf",t.Dn7(28,8,e.detalleL,e.pSize,e.pageD)),t.xp6(11),t.Oqu(t.lcZ(39,12,e.totales.sub)),t.xp6(3),t.Oqu(t.lcZ(42,14,e.totales.subImpuesto)),t.xp6(3),t.Oqu(t.lcZ(45,16,e.totales.subDescuento)),t.xp6(3),t.Oqu(t.lcZ(48,18,e.totales.total)),t.xp6(3),t.Q6J("length",e.detalleL.length)("pageSize",e.pSize)("pageSizeOptions",e.optionsPageD)}}function _e(a,n){if(1&a&&(t.TgZ(0,"div",0)(1,"table",32)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Pedido"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cliente"),t.qZA()()(),t.TgZ(8,"tbody")(9,"tr")(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA()()()(),t.YNc(14,ge,51,20,"div",33),t.qZA()),2&a){const e=t.oxw();t.xp6(11),t.Oqu(e.OrderForUpd.idpedidos),t.xp6(2),t.AsE("",e.OrderForUpd.documento," - ",e.OrderForUpd.nombre,""),t.xp6(1),t.Q6J("ngIf",e.detalleL.length>0)}}function fe(a,n){1&a&&(t.TgZ(0,"span",41),t._uU(1,"Este campo es obligatorio, mas de 1 unidad"),t.qZA())}function ve(a,n){1&a&&(t.TgZ(0,"span",41),t._uU(1,"Este campo es obligatorio, mas de 3 caracteres"),t.qZA())}function be(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().selectForQuery(s)}),t._uU(1),t.qZA()}if(2&a){const e=n.$implicit;t.Q6J("value",e.documento),t.xp6(1),t.AsE(" ",e.documento," - ",e.nombre," ")}}function Ae(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td",13),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td")(15,"a",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).loadForUpdate(s)}),t._uU(16,"Ver"),t.qZA()()()}if(2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.idpedidos),t.xp6(2),t.AsE("",e.documento," - ",e.nombre,""),t.xp6(2),t.Oqu(e.direccionEntrega),t.xp6(2),t.Oqu(e.ciudadN),t.xp6(2),t.Oqu(e.observaciones),t.xp6(2),t.Oqu(t.lcZ(13,7,e.fecha))}}function Te(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",0)(1,"table",10)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cliente"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Direcci\xf3n de entrega"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Ciudad"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Observaciones"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Fecha"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Acci\xf3n"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,Ae,17,9,"tr",11),t.ALo(20,"paginatorPipe"),t.qZA()(),t.TgZ(21,"mat-paginator",12),t.NdJ("page",function(o){return t.CHM(e),t.oxw().pageEvent(o)}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(19),t.Q6J("ngForOf",t.Dn7(20,4,e.salidaList,e.p_Size,e.page)),t.xp6(2),t.Q6J("length",e.salidaList.length)("pageSize",e.p_Size)("pageSizeOptions",e.optionsPage)}}function Ue(a,n){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA()()),2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.iddevoluciones),t.xp6(2),t.Oqu(e.producto),t.xp6(2),t.Oqu(e.cantidad),t.xp6(2),t.Oqu(e.precio),t.xp6(2),t.Oqu(e.observaciones),t.xp6(2),t.Oqu(e.impuesto),t.xp6(2),t.Oqu(t.lcZ(15,7,e.descuento))}}function Ce(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",17)(1,"table",18)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Producto"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Cantidad"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Precio"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Observaciones"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"% Impuesto"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"% Descuento"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,Ue,16,9,"tr",11),t.ALo(20,"paginatorPipe"),t.qZA()(),t.TgZ(21,"mat-paginator",19),t.NdJ("page",function(o){return t.CHM(e),t.oxw(2).pageEventD(o)}),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(19),t.Q6J("ngForOf",t.Dn7(20,4,e.devolucionesPedido,e.pSize,e.pageD)),t.xp6(2),t.Q6J("length",e.detalleL.length)("pageSize",e.pSize)("pageSizeOptions",e.optionsPageD)}}function xe(a,n){if(1&a&&(t.TgZ(0,"div",0)(1,"table",15)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Pedido"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cliente"),t.qZA()()(),t.TgZ(8,"tbody")(9,"tr")(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA()()()(),t.YNc(14,Ce,22,8,"div",16),t.qZA()),2&a){const e=t.oxw();t.xp6(11),t.Oqu(e.OrderForUpd.idpedidos),t.xp6(2),t.AsE("",e.OrderForUpd.documento," - ",e.OrderForUpd.nombre,""),t.xp6(1),t.Q6J("ngIf",e.devolucionesPedido.length>0)}}function Fe(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",26),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().selectForQuery(s)}),t._uU(1),t.qZA()}if(2&a){const e=n.$implicit;t.Q6J("value",e.documento),t.xp6(1),t.AsE(" ",e.documento," - ",e.nombre," ")}}function De(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td",30),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td")(15,"a",31),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).loadForUpdate(s)}),t._uU(16,"Ver"),t.qZA()()()}if(2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.idpedidos),t.xp6(2),t.AsE("",e.documento," - ",e.nombre,""),t.xp6(2),t.Oqu(e.direccionEntrega),t.xp6(2),t.Oqu(e.ciudadN),t.xp6(2),t.Oqu(e.observaciones),t.xp6(2),t.Oqu(t.lcZ(13,7,e.fecha))}}function Oe(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",0)(1,"table",27)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cliente"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Direcci\xf3n de entrega"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Ciudad"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Observaciones"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Fecha"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Acci\xf3n"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,De,17,9,"tr",28),t.ALo(20,"paginatorPipe"),t.qZA()(),t.TgZ(21,"mat-paginator",29),t.NdJ("page",function(o){return t.CHM(e),t.oxw().pageEvent(o)}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(19),t.Q6J("ngForOf",t.Dn7(20,4,e.salidaList,e.p_Size,e.page)),t.xp6(2),t.Q6J("length",e.salidaList.length)("pageSize",e.p_Size)("pageSizeOptions",e.optionsPage)}}function Ie(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"td")(17,"a",37),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(3).selectUpdate(s)}),t.TgZ(18,"span",38),t._uU(19,"edit"),t.qZA()()()()}if(2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.iddevoluciones),t.xp6(2),t.Oqu(e.producto),t.xp6(2),t.Oqu(e.cantidad),t.xp6(2),t.Oqu(e.precio),t.xp6(2),t.Oqu(e.observaciones),t.xp6(2),t.Oqu(e.impuesto),t.xp6(2),t.Oqu(t.lcZ(15,7,e.descuento))}}function Le(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",34)(1,"table",35)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Producto"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Cantidad"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Precio"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Observaciones"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"% Impuesto"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"% Descuento"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Acci\xf3n"),t.qZA()()(),t.TgZ(20,"tbody"),t.YNc(21,Ie,20,9,"tr",28),t.ALo(22,"paginatorPipe"),t.qZA()(),t.TgZ(23,"mat-paginator",36),t.NdJ("page",function(o){return t.CHM(e),t.oxw(2).pageEventD(o)}),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(21),t.Q6J("ngForOf",t.Dn7(22,4,e.devolucionesPedido,e.pSize,e.pageD)),t.xp6(2),t.Q6J("length",e.detalleL.length)("pageSize",e.pSize)("pageSizeOptions",e.optionsPageD)}}function Se(a,n){if(1&a&&(t.TgZ(0,"div",0)(1,"table",32)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Pedido"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cliente"),t.qZA()()(),t.TgZ(8,"tbody")(9,"tr")(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA()()()(),t.YNc(14,Le,24,8,"div",33),t.qZA()),2&a){const e=t.oxw();t.xp6(11),t.Oqu(e.OrderForUpd.idpedidos),t.xp6(2),t.AsE("",e.OrderForUpd.documento," - ",e.OrderForUpd.nombre,""),t.xp6(1),t.Q6J("ngIf",e.devolucionesPedido.length>0)}}function Pe(a,n){1&a&&(t.TgZ(0,"span",39),t._uU(1,"Este campo es obligatorio, mas de 1 unidad"),t.qZA())}function Ne(a,n){1&a&&(t.TgZ(0,"span",39),t._uU(1,"Este campo es obligatorio, mas de 3 caracteres"),t.qZA())}function Me(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",26),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().selectForQuery(s)}),t._uU(1),t.qZA()}if(2&a){const e=n.$implicit;t.Q6J("value",e.documento),t.xp6(1),t.AsE(" ",e.documento," - ",e.nombre," ")}}function we(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td",30),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td")(15,"a",31),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).loadForUpdate(s)}),t._uU(16,"Ver"),t.qZA()()()}if(2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.idpedidos),t.xp6(2),t.AsE("",e.documento," - ",e.nombre,""),t.xp6(2),t.Oqu(e.direccionEntrega),t.xp6(2),t.Oqu(e.ciudadN),t.xp6(2),t.Oqu(e.observaciones),t.xp6(2),t.Oqu(t.lcZ(13,7,e.fecha))}}function Je(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",0)(1,"table",27)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cliente"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Direcci\xf3n de entrega"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Ciudad"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Observaciones"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Fecha"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Acci\xf3n"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,we,17,9,"tr",28),t.ALo(20,"paginatorPipe"),t.qZA()(),t.TgZ(21,"mat-paginator",29),t.NdJ("page",function(o){return t.CHM(e),t.oxw().pageEvent(o)}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(19),t.Q6J("ngForOf",t.Dn7(20,4,e.salidaList,e.p_Size,e.page)),t.xp6(2),t.Q6J("length",e.salidaList.length)("pageSize",e.p_Size)("pageSizeOptions",e.optionsPage)}}function ke(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"td")(17,"a",37),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(3).selectUpdate(s)}),t.TgZ(18,"span",38),t._uU(19,"delete"),t.qZA()()()()}if(2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.iddevoluciones),t.xp6(2),t.Oqu(e.producto),t.xp6(2),t.Oqu(e.cantidad),t.xp6(2),t.Oqu(e.precio),t.xp6(2),t.Oqu(e.observaciones),t.xp6(2),t.Oqu(e.impuesto),t.xp6(2),t.Oqu(t.lcZ(15,7,e.descuento))}}function Ee(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",34)(1,"table",35)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Producto"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Cantidad"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Precio"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Observaciones"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"% Impuesto"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"% Descuento"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Acci\xf3n"),t.qZA()()(),t.TgZ(20,"tbody"),t.YNc(21,ke,20,9,"tr",28),t.ALo(22,"paginatorPipe"),t.qZA()(),t.TgZ(23,"mat-paginator",36),t.NdJ("page",function(o){return t.CHM(e),t.oxw(2).pageEventD(o)}),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(21),t.Q6J("ngForOf",t.Dn7(22,4,e.devolucionesPedido,e.pSize,e.pageD)),t.xp6(2),t.Q6J("length",e.detalleL.length)("pageSize",e.pSize)("pageSizeOptions",e.optionsPageD)}}function ze(a,n){if(1&a&&(t.TgZ(0,"div",0)(1,"table",32)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Pedido"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Cliente"),t.qZA()()(),t.TgZ(8,"tbody")(9,"tr")(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA()()()(),t.YNc(14,Ee,24,8,"div",33),t.qZA()),2&a){const e=t.oxw();t.xp6(11),t.Oqu(e.OrderForUpd.idpedidos),t.xp6(2),t.AsE("",e.OrderForUpd.documento," - ",e.OrderForUpd.nombre,""),t.xp6(1),t.Q6J("ngIf",e.devolucionesPedido.length>0)}}function Qe(a,n){1&a&&(t.TgZ(0,"span",39),t._uU(1,"Este campo es obligatorio, mas de 1 unidad"),t.qZA())}function Ye(a,n){1&a&&(t.TgZ(0,"span",39),t._uU(1,"Este campo es obligatorio, mas de 3 caracteres"),t.qZA())}const $e=[{path:"",component:E,canActivate:[_.z],canLoad:[_.z],children:[{path:"cPedidos",component:W,canActivate:[_.z],canLoad:[_.z]},{path:"fPedidos",component:dt,canActivate:[_.z],canLoad:[_.z]},{path:"uPedidos",component:ft,canActivate:[_.z],canLoad:[_.z]},{path:"dPedidos",component:Ft,canActivate:[_.z],canLoad:[_.z]},{path:"cDetalles",component:J,canActivate:[_.z],canLoad:[_.z]},{path:"cDetalles/:idPedido",component:J,canActivate:[_.z],canLoad:[_.z]},{path:"fDetalles",component:(()=>{class a{constructor(e,i,o,s,d,r){this.salesMng=e,this.aRute=i,this.fb=o,this.clManager=s,this.dataM=d,this.stManager=r,this.myControl=new l.NI,this.criterio="",this.ClientesS=[],this.FiltroC=[],this.forQuery=!1,this.forLoad=!1,this.ciudadesL=[],this.salesOrdersL=[],this.salesFilters=[],this.salidaList=[],this.editar=!1,this.detalleL=[],this.productosL=[],this.serviciosL=[],this.detalleInvL=[],this.viewInvL=[],this.tipoPS="",this.totales={sub:0,subImpuesto:0,subDescuento:0,total:0},this.p_Size=5,this.page=1,this.optionsPage=[5,10,30,50],this.miForm=this.fb.group({productoD:[],servicioD:[],cantidad:[1,[l.kI.required,l.kI.min(1)]]}),this.idPedido=0,this.pSize=5,this.pageD=1,this.optionsPageD=[5,10,30,50]}ngOnInit(){this.salesMng.getDetalles().subscribe(e=>{if(this.detalleL=e,this.detalleL.length>0){let i=0,o=0,s=0,d=0;this.detalleL.forEach(r=>{i+=r.subTotal||0,o+=r.subTotalImpuesto||0,s+=r.subTotalDescuento||0,d+=r.total||0}),this.totales={sub:i,subImpuesto:o,subDescuento:s,total:d}}}),this.loadAllClients(),this.loadCiudades(),this.loadProductos(),this.loadServicios(),this.loadDetalleInv(),this.loadOrders(),this.filteredOptions=this.myControl.valueChanges.pipe((0,Z.U)(e=>this._filter(e)))}loadOrders(){this.salesMng.getAllOrders().subscribe(e=>{if(e.salesOrders)return this.salesOrdersL=e.salesOrders[0],this.salesOrdersL=this.salesOrdersL.sort().reverse(),void this.loadPedido()})}loadPedido(){this.idPedido&&this.idPedido>0&&(this.pedido=this.salesOrdersL.filter(e=>e.idpedidos===this.idPedido),this.generateVPedido())}_filter(e){if((0,x.b)(200),""!=this.criterio){const i=e.toString().toLowerCase();this.FiltroC=this.ClientesS.filter(o=>{var s;return null===(s=o.documento)||void 0===s?void 0:s.toString().toLowerCase().includes(i)}),0===this.FiltroC.length&&(this.FiltroC=[{nombre:"No hay coincidencias"}])}else this.FiltroC=[{nombre:"No hay coincidencias"}];return this.FiltroC}loadProductos(){this.stManager.getAllProducts().subscribe(e=>{e.productos&&(this.productosL=e.productos[0])})}loadServicios(){this.stManager.getAllServicios().subscribe(e=>{e.servicios&&(this.serviciosL=e.servicios[0])})}selectForQuery(e){this.forQuery=!0,localStorage.setItem("search",JSON.stringify(e)),this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.salesFilters=this.salesOrdersL.filter(i=>i.cliente===this.selectedItem.documento),this.salidaList=[],this.salesFilters.length>0&&this.salesFilters.forEach(i=>{const s=new Date(i.anio||1900,(i.mes||1)-1,i.dia||1),d=this.ciudadesL.filter(c=>c.codigo===i.ciudad);this.salidaList.push({idpedidos:i.idpedidos,documento:this.selectedItem.documento||0,nombre:this.selectedItem.nombre||"",direccionEntrega:i.direccionEntrega||"",ciudad:i.ciudad||"",ciudadN:d[0].Ciudad||"",observaciones:i.observaciones||"",fecha:s})})}limpiarInfo(){this.selectedItem={},this.forLoad=!1,this.forQuery=!1,localStorage.removeItem("search"),this.miForm.reset(),this.editar=!1,this.salesMng.clearDetalle(),this.totales={sub:0,subImpuesto:0,subDescuento:0,total:0}}loadAllClients(){this.clManager.getAllClients().subscribe(e=>{e.clientes&&(this.ClientesS=e.clientes[0])})}loadInfo(){this.forQuery?(this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.forLoad=!0):m().fire({text:"No has seleccionado un cliente aun",icon:"warning"})}generateVPedido(){this.salesFilters=this.salesOrdersL.filter(i=>i.idpedidos===this.pedido[0].idpedidos);const e=this.ClientesS.filter(i=>i.documento===this.pedido[0].cliente);this.selectedItem=e[0],this.salesFilters.length>0&&this.salesFilters.forEach(i=>{const s=new Date(i.anio||1900,(i.mes?i.mes:1)-1,i.dia||1),d=this.ciudadesL.filter(c=>c.codigo===i.ciudad);this.salidaList.push({idpedidos:i.idpedidos,documento:this.selectedItem.documento||0,nombre:this.selectedItem.nombre||"",direccionEntrega:i.direccionEntrega||"",ciudad:i.ciudad||"",ciudadN:d[0].Ciudad||"",observaciones:i.observaciones||"",fecha:s})}),this.loadForUpdate(this.salidaList[0]),this.editar=!0}loadOrderDetail(e){this.salesMng.loadDetallesByOrden(e).subscribe(i=>{i.OrderDetail&&i.OrderDetail[0].forEach(s=>{let d=this.productosL.filter(h=>h.idProductos===s.producto),r=(s.precio||0)*(s.cantidad||0),c=(s.precio||0)*((s.impuesto||0)/100)*(s.cantidad||0),g=(s.precio||0)*((s.descuento||0)/100)*(s.cantidad||0);this.salesMng.addDetalle({producto:s.producto,productoName:d[0].producto,cantidad:s.cantidad,precio:s.precio,impuesto:s.impuesto,clienteDoc:s.cliente,clienteName:this.selectedItem.nombre,pedido:s.pedido,tipoProducto:s.tipoProducto,subTotal:r,subTotalImpuesto:c,subTotalDescuento:g,total:(r||0)+(c||0)-(g||0),anio:s.anio,mes:s.mes,dia:s.dia})})})}loadForUpdate(e){this.OrderForUpd=e,this.forLoad=!1,this.editar=!0,this.loadOrderDetail(this.OrderForUpd.idpedidos||0)}ValidaCampo(e){return this.miForm.controls[e].errors&&this.miForm.controls[e].touched}editable(){this.editar=!0}cancelar(){this.editar=!1,this.criterio="",this.miForm.reset(),this.limpiarInfo()}loadCiudades(){this.dataM.getAllCities().subscribe(e=>{e.ciudades&&(this.ciudadesL=e.ciudades[0])})}loadDetalleInv(){this.salesMng.viewInventario().subscribe(e=>{e.detalleInv&&(this.detalleInvL=e.detalleInv[0])})}pageEvent(e){this.p_Size=e.pageSize,this.page=e.pageIndex+1}tipoP(){this.tipoPS="P"}tipoS(){this.tipoPS="S"}pageEventD(e){this.pSize=e.pageSize,this.pageD=e.pageIndex+1}agregarDetalle(){var e,i,o,s;let d;const r={};if("P"===this.tipoPS){d=null===(e=this.miForm.get("productoD"))||void 0===e?void 0:e.value;const u=this.detalleInvL.filter(h=>h.idProductos==d);r.productoName=u[0].producto,r.precio=u[0].PrecioVenta,r.impuesto=u[0].impuesto,r.producto=d,r.descuento=u[0].descuento}else if("S"===this.tipoPS){d=null===(i=this.miForm.get("servicioD"))||void 0===i?void 0:i.value;const u=this.serviciosL.filter(h=>h.idServicios==d);r.productoName=u[0].servicio,r.precio=u[0].precio,r.impuesto=u[0].impuesto,r.producto=d,r.descuento=u[0].descuento}const c=this.OrderForUpd.fecha;r.cantidad=null===(o=this.miForm.get("cantidad"))||void 0===o?void 0:o.value,r.clienteDoc=this.OrderForUpd.documento,r.clienteName=this.OrderForUpd.nombre,r.ciudad=this.OrderForUpd.ciudad,r.ciudadName=this.OrderForUpd.ciudadN,r.pedido=this.OrderForUpd.idpedidos,r.tipoProducto=this.tipoPS,r.subTotal=(r.precio||0)*(r.cantidad||0),r.subTotalImpuesto=(r.precio||0)*((r.impuesto||0)/100)*(r.cantidad||0),r.subTotalDescuento=(r.precio||0)*((r.descuento||0)/100)*(r.cantidad||0),r.total=(r.subTotal||0)+(r.subTotalImpuesto||0)-(r.subTotalDescuento||0),r.anio=c.getFullYear();let g=c.getMonth()||1;r.mes=g+1,r.dia=c.getDate(),this.salesMng.addDetalle(r),null===(s=this.miForm.get("cantidad"))||void 0===s||s.setValue(1)}crearDetalle(){const e=[];this.detalleL.forEach(i=>{e.push({producto:i.producto||void 0,cantidad:i.cantidad,precio:i.precio,impuesto:i.impuesto,cliente:i.clienteDoc,ciudad:i.ciudad,pedido:i.pedido,tipoProducto:i.tipoProducto,dia:i.dia,mes:i.mes,anio:i.anio,descuento:i.descuento})}),this.salesMng.bulkDetalles(e).subscribe(i=>{if(i.error){const o=i.error.errors[0].msg,s=i.error.errors[0].param||"";m().fire({icon:"error",title:"Oops..."+s,text:o})}else m().fire({icon:"success",title:"Creaci\xf3n correcta",text:i.statusDescription}).then(o=>{this.forLoad=!1,this.criterio="",this.limpiarInfo()})})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(q),t.Y36(C.gz),t.Y36(l.qu),t.Y36(D.y),t.Y36(F.m),t.Y36(y.G))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-find-detalle"]],decls:18,vars:8,consts:[[1,"container"],[1,"example-form","form-floating","p-2","m-2"],[1,"m-3","example-full-width"],["type","text","placeholder","","aria-label","Documento cliente","matInput","",1,"example-full-width",3,"formControl","matAutocomplete","ngModel","ngModelChange","focus"],[1,"example-full-width"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",1,"m-2",3,"click"],["class","container",4,"ngIf"],[3,"value","click"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],["aria-label","Select page",1,"m-3","example-full-width",3,"length","pageSize","pageSizeOptions","page"],[1,"col-1"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"table","table-striped","table-hover","w-50"],["class","w-100",4,"ngIf"],[1,"w-100"],[1,"table","table-striped","table-hover","w-100"],["rowspan","6"],["aria-label","Select pageD",1,"m-3","example-full-width",3,"length","pageSize","pageSizeOptions","page"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"B\xfasqueda detalle de pedidos"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",0)(5,"form",1)(6,"mat-form-field",2)(7,"mat-label"),t._uU(8,"Documento cliente"),t.qZA(),t.TgZ(9,"input",3),t.NdJ("ngModelChange",function(s){return i.criterio=s})("focus",function(){return i.limpiarInfo()}),t.qZA(),t.TgZ(10,"mat-autocomplete",4,5),t.YNc(12,kt,2,3,"mat-option",6),t.ALo(13,"async"),t.qZA()(),t.TgZ(14,"button",7),t.NdJ("click",function(){return i.loadInfo()}),t._uU(15,"Visualizar"),t.qZA()()(),t.YNc(16,zt,22,8,"div",8),t.YNc(17,Vt,15,4,"div",8),t.qZA()),2&e){const o=t.MAs(11);t.xp6(9),t.Q6J("formControl",i.myControl)("matAutocomplete",o)("ngModel",i.criterio),t.xp6(3),t.Q6J("ngForOf",t.lcZ(13,6,i.filteredOptions)),t.xp6(4),t.Q6J("ngIf",i.forLoad),t.xp6(1),t.Q6J("ngIf",i.editar)}},directives:[l._Y,l.JL,l.F,f.KE,f.hX,O.Nt,l.Fj,b.ZL,l.JJ,l.oH,b.XC,p.sg,I.ey,L.lW,p.O5,P.NW],pipes:[p.Ov,N,p.uU,p.JJ],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]}),a})(),canActivate:[_.z],canLoad:[_.z]},{path:"uDetalles",component:(()=>{class a{constructor(e,i,o,s,d,r){this.salesMng=e,this.aRute=i,this.fb=o,this.clManager=s,this.dataM=d,this.stManager=r,this.myControl=new l.NI,this.criterio="",this.ClientesS=[],this.FiltroC=[],this.forQuery=!1,this.forLoad=!1,this.ciudadesL=[],this.salesOrdersL=[],this.salesFilters=[],this.salidaList=[],this.editar=!1,this.cargaEditable=!1,this.detalleL=[],this.productosL=[],this.serviciosL=[],this.detalleInvL=[],this.viewInvL=[],this.tipoPS="",this.totales={sub:0,subImpuesto:0,subDescuento:0,total:0},this.p_Size=5,this.page=1,this.optionsPage=[5,10,30,50],this.miForm=this.fb.group({cantidad:[1,[l.kI.required,l.kI.min(1)]]}),this.idPedido=0,this.pSize=5,this.pageD=1,this.optionsPageD=[5,10,30,50]}ngOnInit(){this.salesMng.getDetalles().subscribe(e=>{if(this.detalleL=e,this.detalleL.length>0){let i=0,o=0,s=0,d=0;this.detalleL.forEach(r=>{i+=r.subTotal||0,o+=r.subTotalImpuesto||0,s+=r.subTotalDescuento||0,d+=r.total||0}),this.totales={sub:i,subImpuesto:o,subDescuento:s,total:d}}}),this.loadAllClients(),this.loadCiudades(),this.loadProductos(),this.loadServicios(),this.loadDetalleInv(),this.loadOrders(),this.filteredOptions=this.myControl.valueChanges.pipe((0,Z.U)(e=>this._filter(e)))}loadOrders(){this.salesMng.getAllOrders().subscribe(e=>{if(e.salesOrders)return this.salesOrdersL=e.salesOrders[0],this.salesOrdersL=this.salesOrdersL.sort().reverse(),void this.loadPedido()})}loadPedido(){this.idPedido&&this.idPedido>0&&(this.pedido=this.salesOrdersL.filter(e=>e.idpedidos===this.idPedido),this.generateVPedido())}_filter(e){if((0,x.b)(200),""!=this.criterio){const i=e.toString().toLowerCase();this.FiltroC=this.ClientesS.filter(o=>{var s;return null===(s=o.documento)||void 0===s?void 0:s.toString().toLowerCase().includes(i)}),0===this.FiltroC.length&&(this.FiltroC=[{nombre:"No hay coincidencias"}])}else this.FiltroC=[{nombre:"No hay coincidencias"}];return this.FiltroC}loadProductos(){this.stManager.getAllProducts().subscribe(e=>{e.productos&&(this.productosL=e.productos[0])})}loadServicios(){this.stManager.getAllServicios().subscribe(e=>{e.servicios&&(this.serviciosL=e.servicios[0])})}selectForQuery(e){this.forQuery=!0,localStorage.setItem("search",JSON.stringify(e)),this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.salesFilters=this.salesOrdersL.filter(i=>i.cliente===this.selectedItem.documento),this.salidaList=[],this.salesFilters.length>0&&this.salesFilters.forEach(i=>{const s=new Date(i.anio||1900,(i.mes||1)-1,i.dia||1),d=this.ciudadesL.filter(c=>c.codigo===i.ciudad);this.salidaList.push({idpedidos:i.idpedidos,documento:this.selectedItem.documento||0,nombre:this.selectedItem.nombre||"",direccionEntrega:i.direccionEntrega||"",ciudad:i.ciudad||"",ciudadN:d[0].Ciudad||"",observaciones:i.observaciones||"",fecha:s})})}limpiarInfo(){this.selectedItem={},this.forLoad=!1,this.forQuery=!1,localStorage.removeItem("search"),this.miForm.reset(),this.editar=!1,this.salesMng.clearDetalle(),this.totales={sub:0,subImpuesto:0,subDescuento:0,total:0}}loadAllClients(){this.clManager.getAllClients().subscribe(e=>{e.clientes&&(this.ClientesS=e.clientes[0])})}loadInfo(){this.forQuery?(this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.forLoad=!0):m().fire({text:"No has seleccionado un cliente aun",icon:"warning"})}generateVPedido(){this.salesFilters=this.salesOrdersL.filter(i=>i.idpedidos===this.pedido[0].idpedidos);const e=this.ClientesS.filter(i=>i.documento===this.pedido[0].cliente);this.selectedItem=e[0],this.salesFilters.length>0&&this.salesFilters.forEach(i=>{const s=new Date(i.anio||1900,(i.mes?i.mes:1)-1,i.dia||1),d=this.ciudadesL.filter(c=>c.codigo===i.ciudad);this.salidaList.push({idpedidos:i.idpedidos,documento:this.selectedItem.documento||0,nombre:this.selectedItem.nombre||"",direccionEntrega:i.direccionEntrega||"",ciudad:i.ciudad||"",ciudadN:d[0].Ciudad||"",observaciones:i.observaciones||"",fecha:s})}),this.loadForUpdate(this.salidaList[0])}loadOrderDetail(e){this.salesMng.loadDetallesByOrden(e).subscribe(i=>{i.OrderDetail&&i.OrderDetail[0].forEach(s=>{let d=this.productosL.filter(h=>h.idProductos===s.producto),r=(s.precio||0)*(s.cantidad||0),c=(s.precio||0)*((s.impuesto||0)/100)*(s.cantidad||0),g=(s.precio||0)*((s.descuento||0)/100)*(s.cantidad||0);this.salesMng.addDetalle({iddetallePedido:s.iddetallePedido,producto:s.producto,productoName:d[0].producto,cantidad:s.cantidad,ciudad:s.ciudad,descuento:s.descuento,precio:s.precio,impuesto:s.impuesto,clienteDoc:s.cliente,clienteName:this.selectedItem.nombre,pedido:s.pedido,tipoProducto:s.tipoProducto,subTotal:r,subTotalImpuesto:c,subTotalDescuento:g,total:(r||0)+(c||0)-(g||0),anio:s.anio,mes:s.mes,dia:s.dia})})})}loadForUpdate(e){this.OrderForUpd=e,this.forLoad=!1,this.editar=!0,this.loadOrderDetail(this.OrderForUpd.idpedidos||0)}ValidaCampo(e){return this.miForm.controls[e].errors&&this.miForm.controls[e].touched}editable(){this.cargaEditable=!0}closeEditable(){this.cargaEditable=!1}cancelar(){this.editar=!1,this.criterio="",this.miForm.reset(),this.limpiarInfo()}loadCiudades(){this.dataM.getAllCities().subscribe(e=>{e.ciudades&&(this.ciudadesL=e.ciudades[0])})}loadDetalleInv(){this.salesMng.viewInventario().subscribe(e=>{e.detalleInv&&(this.detalleInvL=e.detalleInv[0])})}pageEvent(e){this.p_Size=e.pageSize,this.page=e.pageIndex+1}pageEventD(e){this.pSize=e.pageSize,this.pageD=e.pageIndex+1}tipoP(){this.tipoPS="P"}tipoS(){this.tipoPS="S"}agregarDetalle(){var e,i,o,s;let d;const r={};if("P"===this.tipoPS){d=null===(e=this.miForm.get("productoD"))||void 0===e?void 0:e.value;const u=this.detalleInvL.filter(h=>h.idProductos==d);r.productoName=u[0].producto,r.precio=u[0].PrecioVenta,r.impuesto=u[0].impuesto,r.producto=d,r.descuento=u[0].descuento}else if("S"===this.tipoPS){d=null===(i=this.miForm.get("servicioD"))||void 0===i?void 0:i.value;const u=this.serviciosL.filter(h=>h.idServicios==d);r.productoName=u[0].servicio,r.precio=u[0].precio,r.impuesto=u[0].impuesto,r.producto=d,r.descuento=u[0].descuento}const c=this.OrderForUpd.fecha;r.cantidad=null===(o=this.miForm.get("cantidad"))||void 0===o?void 0:o.value,r.clienteDoc=this.OrderForUpd.documento,r.clienteName=this.OrderForUpd.nombre,r.ciudad=this.OrderForUpd.ciudad,r.ciudadName=this.OrderForUpd.ciudadN,r.pedido=this.OrderForUpd.idpedidos,r.tipoProducto=this.tipoPS,r.subTotal=(r.precio||0)*(r.cantidad||0),r.subTotalImpuesto=(r.precio||0)*((r.impuesto||0)/100)*(r.cantidad||0),r.subTotalDescuento=(r.precio||0)*((r.descuento||0)/100)*(r.cantidad||0),r.total=(r.subTotal||0)+(r.subTotalImpuesto||0)-(r.subTotalDescuento||0),r.anio=c.getFullYear();let g=c.getMonth()||1;r.mes=g+1,r.dia=c.getDate(),this.salesMng.addDetalle(r),null===(s=this.miForm.get("cantidad"))||void 0===s||s.setValue(1)}selectUpdate(e){this.vistaDetalleUpdate=e}editarDetallesOrd(){var e;if(this.miForm.invalid)return void m().fire({icon:"info",title:"Oops...",text:"Hay cosas por corregir"}).then(d=>{this.miForm.markAllAsTouched()});const i=parseInt((null===(e=this.miForm.get("cantidad"))||void 0===e?void 0:e.value)||0);(this.detalleInvL.filter(d=>d.idProductos==this.vistaDetalleUpdate.producto)[0].stock||0)+(this.vistaDetalleUpdate.cantidad||0)-i<0?m().fire({icon:"error",title:"Oops...",text:"El inventario del articulo no alcanza para vender esta cantidad"}):this.updateDetalle(i)}updateDetalle(e){this.salesMng.updateDetalle({iddetallePedido:this.vistaDetalleUpdate.iddetallePedido,producto:this.vistaDetalleUpdate.producto,cantidad:e,precio:this.vistaDetalleUpdate.precio,impuesto:this.vistaDetalleUpdate.impuesto,cliente:this.vistaDetalleUpdate.clienteDoc,ciudad:this.vistaDetalleUpdate.ciudad,pedido:this.vistaDetalleUpdate.pedido,tipoProducto:this.vistaDetalleUpdate.tipoProducto,dia:this.vistaDetalleUpdate.dia,mes:this.vistaDetalleUpdate.mes,anio:this.vistaDetalleUpdate.anio,descuento:this.vistaDetalleUpdate.descuento}).subscribe(o=>{if(o.error){const s=o.error.errors[0].msg,d=o.error.errors[0].param||"";m().fire({icon:"error",title:"Oops..."+d,text:s})}else m().fire({icon:"success",title:"Actualizaci\xf3n correcta",text:o.statusDescription}).then(s=>{this.forLoad=!1,this.criterio="",this.vistaDetalleUpdate={},this.limpiarInfo()})})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(q),t.Y36(C.gz),t.Y36(l.qu),t.Y36(D.y),t.Y36(F.m),t.Y36(y.G))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-upd-detalle"]],decls:38,vars:10,consts:[[1,"container"],[1,"example-form","form-floating","p-2","m-2"],[1,"m-3","example-full-width"],["type","text","placeholder","","aria-label","Documento cliente","matInput","",1,"example-full-width",3,"formControl","matAutocomplete","ngModel","ngModelChange","focus"],[1,"example-full-width"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",1,"m-2",3,"click"],["class","container",4,"ngIf"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"form-control","form-floating"],["action","",3,"formGroup"],[1,"form-floating","m-3"],["type","number","id","floatingInput","placeholder","Cantidad","formControlName","cantidad",1,"form-control"],["for","floatingInput"],["class","form-text text-danger",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],[3,"value","click"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],["aria-label","Select page",1,"m-3","example-full-width",3,"length","pageSize","pageSizeOptions","page"],[1,"col-1"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"table","table-striped","table-hover","w-50"],["class","w-100",4,"ngIf"],[1,"w-100"],[1,"table","table-striped","table-hover","w-100"],["rowspan","6"],["aria-label","Select pageD",1,"m-3","example-full-width",3,"length","pageSize","pageSizeOptions","page"],[4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#staticBackdrop",3,"click"],[1,"material-icons","bi","md-48","bg-warning","rounded-circle","float-end"],[1,"form-text","text-danger"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Actualizaci\xf3n detalle de pedidos"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",0)(5,"form",1)(6,"mat-form-field",2)(7,"mat-label"),t._uU(8,"Documento cliente"),t.qZA(),t.TgZ(9,"input",3),t.NdJ("ngModelChange",function(s){return i.criterio=s})("focus",function(){return i.limpiarInfo()}),t.qZA(),t.TgZ(10,"mat-autocomplete",4,5),t.YNc(12,Ht,2,3,"mat-option",6),t.ALo(13,"async"),t.qZA()(),t.TgZ(14,"button",7),t.NdJ("click",function(){return i.loadInfo()}),t._uU(15,"Visualizar"),t.qZA()()(),t.YNc(16,Bt,22,8,"div",8),t.YNc(17,jt,15,4,"div",8),t.TgZ(18,"div",9)(19,"div",10)(20,"div",11)(21,"div",12)(22,"h5",13),t._uU(23,"Modificaci\xf3n detalle"),t.qZA(),t._UZ(24,"button",14),t.qZA(),t.TgZ(25,"div",15)(26,"div",16)(27,"form",17)(28,"div",18),t._UZ(29,"input",19),t.TgZ(30,"label",20),t._uU(31,"Cantidad"),t.qZA(),t.YNc(32,Rt,2,0,"span",21),t.qZA()()()(),t.TgZ(33,"div",22)(34,"button",23),t._uU(35,"Cancelar"),t.qZA(),t.TgZ(36,"button",24),t.NdJ("click",function(){return i.editarDetallesOrd()}),t._uU(37,"Actualizar"),t.qZA()()()()()()),2&e){const o=t.MAs(11);t.xp6(9),t.Q6J("formControl",i.myControl)("matAutocomplete",o)("ngModel",i.criterio),t.xp6(3),t.Q6J("ngForOf",t.lcZ(13,8,i.filteredOptions)),t.xp6(4),t.Q6J("ngIf",i.forLoad),t.xp6(1),t.Q6J("ngIf",i.editar),t.xp6(10),t.Q6J("formGroup",i.miForm),t.xp6(5),t.Q6J("ngIf",i.ValidaCampo("cantidad"))}},directives:[l._Y,l.JL,l.F,f.KE,f.hX,O.Nt,l.Fj,b.ZL,l.JJ,l.oH,b.XC,p.sg,I.ey,L.lW,p.O5,P.NW,l.sg,l.wV,l.u],pipes:[p.Ov,N,p.uU,p.JJ],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]}),a})(),canActivate:[_.z],canLoad:[_.z]},{path:"dDetalles",component:(()=>{class a{constructor(e,i,o,s,d,r){this.salesMng=e,this.aRute=i,this.fb=o,this.clManager=s,this.dataM=d,this.stManager=r,this.myControl=new l.NI,this.criterio="",this.ClientesS=[],this.FiltroC=[],this.forQuery=!1,this.forLoad=!1,this.ciudadesL=[],this.salesOrdersL=[],this.salesFilters=[],this.salidaList=[],this.editar=!1,this.cargaEditable=!1,this.detalleL=[],this.productosL=[],this.serviciosL=[],this.detalleInvL=[],this.viewInvL=[],this.tipoPS="",this.totales={sub:0,subImpuesto:0,subDescuento:0,total:0},this.p_Size=5,this.page=1,this.optionsPage=[5,10,30,50],this.miForm=this.fb.group({cantidad:[1,[l.kI.required,l.kI.min(1)]]}),this.idPedido=0,this.pSize=5,this.pageD=1,this.optionsPageD=[5,10,30,50]}ngOnInit(){this.salesMng.getDetalles().subscribe(e=>{if(this.detalleL=e,this.detalleL.length>0){let i=0,o=0,s=0,d=0;this.detalleL.forEach(r=>{i+=r.subTotal||0,o+=r.subTotalImpuesto||0,s+=r.subTotalDescuento||0,d+=r.total||0}),this.totales={sub:i,subImpuesto:o,subDescuento:s,total:d}}}),this.loadAllClients(),this.loadCiudades(),this.loadProductos(),this.loadServicios(),this.loadDetalleInv(),this.loadOrders(),this.filteredOptions=this.myControl.valueChanges.pipe((0,Z.U)(e=>this._filter(e)))}loadOrders(){this.salesMng.getAllOrders().subscribe(e=>{if(e.salesOrders)return this.salesOrdersL=e.salesOrders[0],this.salesOrdersL=this.salesOrdersL.sort().reverse(),void this.loadPedido()})}loadPedido(){this.idPedido&&this.idPedido>0&&(this.pedido=this.salesOrdersL.filter(e=>e.idpedidos===this.idPedido),this.generateVPedido())}_filter(e){if((0,x.b)(200),""!=this.criterio){const i=e.toString().toLowerCase();this.FiltroC=this.ClientesS.filter(o=>{var s;return null===(s=o.documento)||void 0===s?void 0:s.toString().toLowerCase().includes(i)}),0===this.FiltroC.length&&(this.FiltroC=[{nombre:"No hay coincidencias"}])}else this.FiltroC=[{nombre:"No hay coincidencias"}];return this.FiltroC}loadProductos(){this.stManager.getAllProducts().subscribe(e=>{e.productos&&(this.productosL=e.productos[0])})}loadServicios(){this.stManager.getAllServicios().subscribe(e=>{e.servicios&&(this.serviciosL=e.servicios[0])})}selectForQuery(e){this.forQuery=!0,localStorage.setItem("search",JSON.stringify(e)),this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.salesFilters=this.salesOrdersL.filter(i=>i.cliente===this.selectedItem.documento),this.salidaList=[],this.salesFilters.length>0&&this.salesFilters.forEach(i=>{const s=new Date(i.anio||1900,(i.mes||1)-1,i.dia||1),d=this.ciudadesL.filter(c=>c.codigo===i.ciudad);this.salidaList.push({idpedidos:i.idpedidos,documento:this.selectedItem.documento||0,nombre:this.selectedItem.nombre||"",direccionEntrega:i.direccionEntrega||"",ciudad:i.ciudad||"",ciudadN:d[0].Ciudad||"",observaciones:i.observaciones||"",fecha:s})})}limpiarInfo(){this.selectedItem={},this.forLoad=!1,this.forQuery=!1,localStorage.removeItem("search"),this.miForm.reset(),this.editar=!1,this.salesMng.clearDetalle(),this.totales={sub:0,subImpuesto:0,subDescuento:0,total:0}}loadAllClients(){this.clManager.getAllClients().subscribe(e=>{e.clientes&&(this.ClientesS=e.clientes[0])})}loadInfo(){this.forQuery?(this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.forLoad=!0):m().fire({text:"No has seleccionado un cliente aun",icon:"warning"})}generateVPedido(){this.salesFilters=this.salesOrdersL.filter(i=>i.idpedidos===this.pedido[0].idpedidos);const e=this.ClientesS.filter(i=>i.documento===this.pedido[0].cliente);this.selectedItem=e[0],this.salesFilters.length>0&&this.salesFilters.forEach(i=>{const s=new Date(i.anio||1900,(i.mes?i.mes:1)-1,i.dia||1),d=this.ciudadesL.filter(c=>c.codigo===i.ciudad);this.salidaList.push({idpedidos:i.idpedidos,documento:this.selectedItem.documento||0,nombre:this.selectedItem.nombre||"",direccionEntrega:i.direccionEntrega||"",ciudad:i.ciudad||"",ciudadN:d[0].Ciudad||"",observaciones:i.observaciones||"",fecha:s})}),this.loadForUpdate(this.salidaList[0])}loadOrderDetail(e){this.salesMng.loadDetallesByOrden(e).subscribe(i=>{i.OrderDetail&&i.OrderDetail[0].forEach(s=>{let d=this.productosL.filter(h=>h.idProductos===s.producto),r=(s.precio||0)*(s.cantidad||0),c=(s.precio||0)*((s.impuesto||0)/100)*(s.cantidad||0),g=(s.precio||0)*((s.descuento||0)/100)*(s.cantidad||0);this.salesMng.addDetalle({iddetallePedido:s.iddetallePedido,producto:s.producto,productoName:d[0].producto,cantidad:s.cantidad,ciudad:s.ciudad,descuento:s.descuento,precio:s.precio,impuesto:s.impuesto,clienteDoc:s.cliente,clienteName:this.selectedItem.nombre,pedido:s.pedido,tipoProducto:s.tipoProducto,subTotal:r,subTotalImpuesto:c,subTotalDescuento:g,total:(r||0)+(c||0)-(g||0),anio:s.anio,mes:s.mes,dia:s.dia})})})}loadForUpdate(e){this.OrderForUpd=e,this.forLoad=!1,this.editar=!0,this.loadOrderDetail(this.OrderForUpd.idpedidos||0)}ValidaCampo(e){return this.miForm.controls[e].errors&&this.miForm.controls[e].touched}editable(){this.cargaEditable=!0}closeEditable(){this.cargaEditable=!1}cancelar(){this.editar=!1,this.criterio="",this.miForm.reset(),this.limpiarInfo()}loadCiudades(){this.dataM.getAllCities().subscribe(e=>{e.ciudades&&(this.ciudadesL=e.ciudades[0])})}loadDetalleInv(){this.salesMng.viewInventario().subscribe(e=>{e.detalleInv&&(this.detalleInvL=e.detalleInv[0])})}pageEvent(e){this.p_Size=e.pageSize,this.page=e.pageIndex+1}pageEventD(e){this.pSize=e.pageSize,this.pageD=e.pageIndex+1}tipoP(){this.tipoPS="P"}tipoS(){this.tipoPS="S"}agregarDetalle(){var e,i,o,s;let d;const r={};if("P"===this.tipoPS){d=null===(e=this.miForm.get("productoD"))||void 0===e?void 0:e.value;const u=this.detalleInvL.filter(h=>h.idProductos==d);r.productoName=u[0].producto,r.precio=u[0].PrecioVenta,r.impuesto=u[0].impuesto,r.producto=d,r.descuento=u[0].descuento}else if("S"===this.tipoPS){d=null===(i=this.miForm.get("servicioD"))||void 0===i?void 0:i.value;const u=this.serviciosL.filter(h=>h.idServicios==d);r.productoName=u[0].servicio,r.precio=u[0].precio,r.impuesto=u[0].impuesto,r.producto=d,r.descuento=u[0].descuento}const c=this.OrderForUpd.fecha;r.cantidad=null===(o=this.miForm.get("cantidad"))||void 0===o?void 0:o.value,r.clienteDoc=this.OrderForUpd.documento,r.clienteName=this.OrderForUpd.nombre,r.ciudad=this.OrderForUpd.ciudad,r.ciudadName=this.OrderForUpd.ciudadN,r.pedido=this.OrderForUpd.idpedidos,r.tipoProducto=this.tipoPS,r.subTotal=(r.precio||0)*(r.cantidad||0),r.subTotalImpuesto=(r.precio||0)*((r.impuesto||0)/100)*(r.cantidad||0),r.subTotalDescuento=(r.precio||0)*((r.descuento||0)/100)*(r.cantidad||0),r.total=(r.subTotal||0)+(r.subTotalImpuesto||0)-(r.subTotalDescuento||0),r.anio=c.getFullYear();let g=c.getMonth()||1;r.mes=g+1,r.dia=c.getDate(),this.salesMng.addDetalle(r),null===(s=this.miForm.get("cantidad"))||void 0===s||s.setValue(1)}selectUpdate(e){this.vistaDetalleUpdate=e}deleteDetalle(){this.salesMng.delDetalle({iddetallePedido:this.vistaDetalleUpdate.iddetallePedido}).subscribe(i=>{if(i.error){const o=i.error.errors[0].msg,s=i.error.errors[0].param||"";m().fire({icon:"error",title:"Oops..."+s,text:o})}else m().fire({icon:"success",title:"Eliminaci\xf3n correcta",text:i.statusDescription}).then(o=>{this.forLoad=!1,this.criterio="",this.vistaDetalleUpdate={},this.limpiarInfo()})})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(q),t.Y36(C.gz),t.Y36(l.qu),t.Y36(D.y),t.Y36(F.m),t.Y36(y.G))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-del-detalle"]],decls:34,vars:10,consts:[[1,"container"],[1,"example-form","form-floating","p-2","m-2"],[1,"m-3","example-full-width"],["type","text","placeholder","","aria-label","Documento cliente","matInput","",1,"example-full-width",3,"formControl","matAutocomplete","ngModel","ngModelChange","focus"],[1,"example-full-width"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",1,"m-2",3,"click"],["class","container",4,"ngIf"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"form-control","form-floating","bg-info"],["action","",1,"bg-info",3,"formGroup"],[4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[3,"value","click"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],["aria-label","Select page",1,"m-3","example-full-width",3,"length","pageSize","pageSizeOptions","page"],[1,"col-1"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"table","table-striped","table-hover","w-50"],["class","w-100",4,"ngIf"],[1,"w-100"],[1,"table","table-striped","table-hover","w-100"],["rowspan","6"],["aria-label","Select pageD",1,"m-3","example-full-width",3,"length","pageSize","pageSizeOptions","page"],["type","button","data-bs-toggle","modal","data-bs-target","#staticBackdrop",3,"click"],[1,"material-icons","bi","md-48","bg-danger","rounded-circle","float-end"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Eliminaci\xf3n detalle de pedidos"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",0)(5,"form",1)(6,"mat-form-field",2)(7,"mat-label"),t._uU(8,"Documento cliente"),t.qZA(),t.TgZ(9,"input",3),t.NdJ("ngModelChange",function(s){return i.criterio=s})("focus",function(){return i.limpiarInfo()}),t.qZA(),t.TgZ(10,"mat-autocomplete",4,5),t.YNc(12,ee,2,3,"mat-option",6),t.ALo(13,"async"),t.qZA()(),t.TgZ(14,"button",7),t.NdJ("click",function(){return i.loadInfo()}),t._uU(15,"Visualizar"),t.qZA()()(),t.YNc(16,oe,22,8,"div",8),t.YNc(17,de,15,4,"div",8),t.TgZ(18,"div",9)(19,"div",10)(20,"div",11)(21,"div",12)(22,"h5",13),t._uU(23,"Modificaci\xf3n detalle"),t.qZA(),t._UZ(24,"button",14),t.qZA(),t.TgZ(25,"div",15)(26,"div",16)(27,"form",17),t.YNc(28,ne,5,1,"div",18),t.qZA()()(),t.TgZ(29,"div",19)(30,"button",20),t._uU(31,"Cancelar"),t.qZA(),t.TgZ(32,"button",21),t.NdJ("click",function(){return i.deleteDetalle()}),t._uU(33,"Eliminar"),t.qZA()()()()()()),2&e){const o=t.MAs(11);t.xp6(9),t.Q6J("formControl",i.myControl)("matAutocomplete",o)("ngModel",i.criterio),t.xp6(3),t.Q6J("ngForOf",t.lcZ(13,8,i.filteredOptions)),t.xp6(4),t.Q6J("ngIf",i.forLoad),t.xp6(1),t.Q6J("ngIf",i.editar),t.xp6(10),t.Q6J("formGroup",i.miForm),t.xp6(1),t.Q6J("ngIf",i.vistaDetalleUpdate)}},directives:[l._Y,l.JL,l.F,f.KE,f.hX,O.Nt,l.Fj,b.ZL,l.JJ,l.oH,b.XC,p.sg,I.ey,L.lW,p.O5,P.NW,l.sg],pipes:[p.Ov,N,p.uU,p.JJ],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]}),a})(),canActivate:[_.z],canLoad:[_.z]},{path:"cDevoluciones",component:(()=>{class a{constructor(e,i,o,s,d,r){this.salesMng=e,this.aRute=i,this.fb=o,this.clManager=s,this.dataM=d,this.stManager=r,this.myControl=new l.NI,this.criterio="",this.ClientesS=[],this.FiltroC=[],this.forQuery=!1,this.forLoad=!1,this.ciudadesL=[],this.salesOrdersL=[],this.salesFilters=[],this.salidaList=[],this.editar=!1,this.cargaEditable=!1,this.detalleL=[],this.productosL=[],this.serviciosL=[],this.detalleInvL=[],this.viewInvL=[],this.tipoPS="",this.totales={sub:0,subImpuesto:0,subDescuento:0,total:0},this.p_Size=5,this.page=1,this.optionsPage=[5,10,30,50],this.miForm=this.fb.group({cantidad:[1,[l.kI.required,l.kI.min(1)]],observaciones:["",[l.kI.required,l.kI.minLength(3)]]}),this.idPedido=0,this.pSize=5,this.pageD=1,this.optionsPageD=[5,10,30,50]}ngOnInit(){this.salesMng.getDetalles().subscribe(e=>{if(this.detalleL=e,this.detalleL.length>0){let i=0,o=0,s=0,d=0;this.detalleL.forEach(r=>{i+=r.subTotal||0,o+=r.subTotalImpuesto||0,s+=r.subTotalDescuento||0,d+=r.total||0}),this.totales={sub:i,subImpuesto:o,subDescuento:s,total:d}}}),this.loadAllClients(),this.loadCiudades(),this.loadProductos(),this.loadServicios(),this.loadDetalleInv(),this.loadOrders(),this.filteredOptions=this.myControl.valueChanges.pipe((0,Z.U)(e=>this._filter(e)))}loadOrders(){this.salesMng.getAllOrders().subscribe(e=>{if(e.salesOrders)return this.salesOrdersL=e.salesOrders[0],this.salesOrdersL=this.salesOrdersL.sort().reverse(),void this.loadPedido()})}loadPedido(){this.idPedido&&this.idPedido>0&&(this.pedido=this.salesOrdersL.filter(e=>e.idpedidos===this.idPedido),this.generateVPedido())}_filter(e){if((0,x.b)(200),""!=this.criterio){const i=e.toString().toLowerCase();this.FiltroC=this.ClientesS.filter(o=>{var s;return null===(s=o.documento)||void 0===s?void 0:s.toString().toLowerCase().includes(i)}),0===this.FiltroC.length&&(this.FiltroC=[{nombre:"No hay coincidencias"}])}else this.FiltroC=[{nombre:"No hay coincidencias"}];return this.FiltroC}loadProductos(){this.stManager.getAllProducts().subscribe(e=>{e.productos&&(this.productosL=e.productos[0])})}loadServicios(){this.stManager.getAllServicios().subscribe(e=>{e.servicios&&(this.serviciosL=e.servicios[0])})}selectForQuery(e){this.forQuery=!0,localStorage.setItem("search",JSON.stringify(e)),this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.salesFilters=this.salesOrdersL.filter(i=>i.cliente===this.selectedItem.documento),this.salidaList=[],this.salesFilters.length>0&&this.salesFilters.forEach(i=>{const s=new Date(i.anio||1900,(i.mes||1)-1,i.dia||1),d=this.ciudadesL.filter(c=>c.codigo===i.ciudad);this.salidaList.push({idpedidos:i.idpedidos,documento:this.selectedItem.documento||0,nombre:this.selectedItem.nombre||"",direccionEntrega:i.direccionEntrega||"",ciudad:i.ciudad||"",ciudadN:d[0].Ciudad||"",observaciones:i.observaciones||"",fecha:s})})}limpiarInfo(){this.selectedItem={},this.forLoad=!1,this.forQuery=!1,localStorage.removeItem("search"),this.miForm.reset(),this.editar=!1,this.salesMng.clearDetalle(),this.totales={sub:0,subImpuesto:0,subDescuento:0,total:0}}loadAllClients(){this.clManager.getAllClients().subscribe(e=>{e.clientes&&(this.ClientesS=e.clientes[0])})}loadInfo(){this.forQuery?(this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.forLoad=!0):m().fire({text:"No has seleccionado un cliente aun",icon:"warning"})}generateVPedido(){this.salesFilters=this.salesOrdersL.filter(i=>i.idpedidos===this.pedido[0].idpedidos);const e=this.ClientesS.filter(i=>i.documento===this.pedido[0].cliente);this.selectedItem=e[0],this.salesFilters.length>0&&this.salesFilters.forEach(i=>{const s=new Date(i.anio||1900,(i.mes?i.mes:1)-1,i.dia||1),d=this.ciudadesL.filter(c=>c.codigo===i.ciudad);this.salidaList.push({idpedidos:i.idpedidos,documento:this.selectedItem.documento||0,nombre:this.selectedItem.nombre||"",direccionEntrega:i.direccionEntrega||"",ciudad:i.ciudad||"",ciudadN:d[0].Ciudad||"",observaciones:i.observaciones||"",fecha:s})}),this.loadForUpdate(this.salidaList[0])}loadOrderDetail(e){this.salesMng.loadDetallesByOrden(e).subscribe(i=>{i.OrderDetail&&i.OrderDetail[0].forEach(s=>{let d=this.productosL.filter(h=>h.idProductos===s.producto),r=(s.precio||0)*(s.cantidad||0),c=(s.precio||0)*((s.impuesto||0)/100)*(s.cantidad||0),g=(s.precio||0)*((s.descuento||0)/100)*(s.cantidad||0);this.salesMng.addDetalle({iddetallePedido:s.iddetallePedido,producto:s.producto,productoName:d[0].producto,cantidad:s.cantidad,ciudad:s.ciudad,descuento:s.descuento,precio:s.precio,impuesto:s.impuesto,clienteDoc:s.cliente,clienteName:this.selectedItem.nombre,pedido:s.pedido,tipoProducto:s.tipoProducto,subTotal:r,subTotalImpuesto:c,subTotalDescuento:g,total:(r||0)+(c||0)-(g||0),anio:s.anio,mes:s.mes,dia:s.dia})})})}loadForUpdate(e){this.OrderForUpd=e,this.forLoad=!1,this.editar=!0,this.loadOrderDetail(this.OrderForUpd.idpedidos||0)}ValidaCampo(e){return this.miForm.controls[e].errors&&this.miForm.controls[e].touched}editable(){this.cargaEditable=!0}closeEditable(){this.cargaEditable=!1}cancelar(){this.editar=!1,this.criterio="",this.miForm.reset(),this.limpiarInfo()}loadCiudades(){this.dataM.getAllCities().subscribe(e=>{e.ciudades&&(this.ciudadesL=e.ciudades[0])})}loadDetalleInv(){this.salesMng.viewInventario().subscribe(e=>{e.detalleInv&&(this.detalleInvL=e.detalleInv[0])})}pageEvent(e){this.p_Size=e.pageSize,this.page=e.pageIndex+1}pageEventD(e){this.pSize=e.pageSize,this.pageD=e.pageIndex+1}tipoP(){this.tipoPS="P"}tipoS(){this.tipoPS="S"}agregarDetalle(){var e,i,o,s;let d;const r={};if("P"===this.tipoPS){d=null===(e=this.miForm.get("productoD"))||void 0===e?void 0:e.value;const u=this.detalleInvL.filter(h=>h.idProductos==d);r.productoName=u[0].producto,r.precio=u[0].PrecioVenta,r.impuesto=u[0].impuesto,r.producto=d,r.descuento=u[0].descuento}else if("S"===this.tipoPS){d=null===(i=this.miForm.get("servicioD"))||void 0===i?void 0:i.value;const u=this.serviciosL.filter(h=>h.idServicios==d);r.productoName=u[0].servicio,r.precio=u[0].precio,r.impuesto=u[0].impuesto,r.producto=d,r.descuento=u[0].descuento}const c=this.OrderForUpd.fecha;r.cantidad=null===(o=this.miForm.get("cantidad"))||void 0===o?void 0:o.value,r.clienteDoc=this.OrderForUpd.documento,r.clienteName=this.OrderForUpd.nombre,r.ciudad=this.OrderForUpd.ciudad,r.ciudadName=this.OrderForUpd.ciudadN,r.pedido=this.OrderForUpd.idpedidos,r.tipoProducto=this.tipoPS,r.subTotal=(r.precio||0)*(r.cantidad||0),r.subTotalImpuesto=(r.precio||0)*((r.impuesto||0)/100)*(r.cantidad||0),r.subTotalDescuento=(r.precio||0)*((r.descuento||0)/100)*(r.cantidad||0),r.total=(r.subTotal||0)+(r.subTotalImpuesto||0)-(r.subTotalDescuento||0),r.anio=c.getFullYear();let g=c.getMonth()||1;r.mes=g+1,r.dia=c.getDate(),this.salesMng.addDetalle(r),null===(s=this.miForm.get("cantidad"))||void 0===s||s.setValue(1)}selectUpdate(e){this.vistaDetalleUpdate=e}crearDevolucion(){var e,i;if(this.miForm.invalid)return void m().fire({icon:"info",title:"Oops...",text:"Hay cosas por corregir"}).then(s=>{this.miForm.markAllAsTouched()});const o={pedido:this.vistaDetalleUpdate.pedido,producto:this.vistaDetalleUpdate.producto,cantidad:null===(e=this.miForm.get("cantidad"))||void 0===e?void 0:e.value,precio:this.vistaDetalleUpdate.precio,impuesto:this.vistaDetalleUpdate.impuesto,observaciones:null===(i=this.miForm.get("observaciones"))||void 0===i?void 0:i.value,descuento:this.vistaDetalleUpdate.descuento};this.salesMng.createDevolucion(o).subscribe(s=>{if(s.error){const d=s.error.errors[0].msg,r=s.error.errors[0].param||"";m().fire({icon:"error",title:"Oops..."+r,text:d})}else m().fire({icon:"success",title:"Creaci\xf3n correcta",text:s.statusDescription}).then(d=>{this.forLoad=!1,this.criterio="",this.vistaDetalleUpdate={},this.limpiarInfo()})})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(q),t.Y36(C.gz),t.Y36(l.qu),t.Y36(D.y),t.Y36(F.m),t.Y36(y.G))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-devoluciones"]],decls:43,vars:11,consts:[[1,"container"],[1,"example-form","form-floating","p-2","m-2"],[1,"m-3","example-full-width"],["type","text","placeholder","","aria-label","Documento cliente","matInput","",1,"example-full-width",3,"formControl","matAutocomplete","ngModel","ngModelChange","focus"],[1,"example-full-width"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",1,"m-2",3,"click"],["class","container",4,"ngIf"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"form-control","form-floating"],["action","",3,"formGroup"],[1,"form-floating","m-3"],["type","number","id","floatingInput","placeholder","Cantidad","formControlName","cantidad",1,"form-control"],["for","floatingInput"],["class","form-text text-danger",4,"ngIf"],["type","text","id","floatingInput","placeholder","Observaciones","formControlName","observaciones",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-success",3,"click"],[3,"value","click"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],["aria-label","Select page",1,"m-3","example-full-width",3,"length","pageSize","pageSizeOptions","page"],[1,"col-1"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"table","table-striped","table-hover","w-50"],["class","w-100",4,"ngIf"],[1,"w-100"],[1,"table","table-striped","table-hover","w-100"],["rowspan","6"],["aria-label","Select pageD",1,"m-3","example-full-width",3,"length","pageSize","pageSizeOptions","page"],[4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#staticBackdrop",3,"click"],[1,"material-icons","bi","md-48","bg-warning","rounded-circle","float-end"],[1,"form-text","text-danger"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Creaci\xf3n devoluciones"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",0)(5,"form",1)(6,"mat-form-field",2)(7,"mat-label"),t._uU(8,"Documento cliente"),t.qZA(),t.TgZ(9,"input",3),t.NdJ("ngModelChange",function(s){return i.criterio=s})("focus",function(){return i.limpiarInfo()}),t.qZA(),t.TgZ(10,"mat-autocomplete",4,5),t.YNc(12,ce,2,3,"mat-option",6),t.ALo(13,"async"),t.qZA()(),t.TgZ(14,"button",7),t.NdJ("click",function(){return i.loadInfo()}),t._uU(15,"Visualizar"),t.qZA()()(),t.YNc(16,pe,22,8,"div",8),t.YNc(17,_e,15,4,"div",8),t.TgZ(18,"div",9)(19,"div",10)(20,"div",11)(21,"div",12)(22,"h5",13),t._uU(23,"Agregar devoluci\xf3n"),t.qZA(),t._UZ(24,"button",14),t.qZA(),t.TgZ(25,"div",15)(26,"div",16)(27,"form",17)(28,"div",18),t._UZ(29,"input",19),t.TgZ(30,"label",20),t._uU(31,"Cantidad"),t.qZA(),t.YNc(32,fe,2,0,"span",21),t.qZA(),t.TgZ(33,"div",18),t._UZ(34,"input",22),t.TgZ(35,"label",20),t._uU(36,"Observaciones"),t.qZA(),t.YNc(37,ve,2,0,"span",21),t.qZA()()()(),t.TgZ(38,"div",23)(39,"button",24),t._uU(40,"Cancelar"),t.qZA(),t.TgZ(41,"button",25),t.NdJ("click",function(){return i.crearDevolucion()}),t._uU(42,"Crear"),t.qZA()()()()()()),2&e){const o=t.MAs(11);t.xp6(9),t.Q6J("formControl",i.myControl)("matAutocomplete",o)("ngModel",i.criterio),t.xp6(3),t.Q6J("ngForOf",t.lcZ(13,9,i.filteredOptions)),t.xp6(4),t.Q6J("ngIf",i.forLoad),t.xp6(1),t.Q6J("ngIf",i.editar),t.xp6(10),t.Q6J("formGroup",i.miForm),t.xp6(5),t.Q6J("ngIf",i.ValidaCampo("cantidad")),t.xp6(5),t.Q6J("ngIf",i.ValidaCampo("observaciones"))}},directives:[l._Y,l.JL,l.F,f.KE,f.hX,O.Nt,l.Fj,b.ZL,l.JJ,l.oH,b.XC,p.sg,I.ey,L.lW,p.O5,P.NW,l.sg,l.wV,l.u],pipes:[p.Ov,N,p.uU,p.JJ],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]}),a})(),canActivate:[_.z],canLoad:[_.z]},{path:"fDevoluciones",component:(()=>{class a{constructor(e,i,o,s,d,r){this.salesMng=e,this.aRute=i,this.fb=o,this.clManager=s,this.dataM=d,this.stManager=r,this.myControl=new l.NI,this.criterio="",this.ClientesS=[],this.FiltroC=[],this.forQuery=!1,this.forLoad=!1,this.ciudadesL=[],this.salesOrdersL=[],this.salesFilters=[],this.salidaList=[],this.editar=!1,this.cargaEditable=!1,this.detalleL=[],this.productosL=[],this.serviciosL=[],this.detalleInvL=[],this.viewInvL=[],this.tipoPS="",this.totales={sub:0,subImpuesto:0,subDescuento:0,total:0},this.listaDevoluciones=[],this.devolucionesPedido=[],this.p_Size=5,this.page=1,this.optionsPage=[5,10,30,50],this.miForm=this.fb.group({cantidad:[1,[l.kI.required,l.kI.min(1)]],observaciones:["",[l.kI.required,l.kI.minLength(3)]]}),this.idPedido=0,this.pSize=5,this.pageD=1,this.optionsPageD=[5,10,30,50]}ngOnInit(){this.loadAllClients(),this.loadCiudades(),this.loadProductos(),this.loadServicios(),this.loadDetalleInv(),this.loadDevoluciones(),this.loadOrders(),this.filteredOptions=this.myControl.valueChanges.pipe((0,Z.U)(e=>this._filter(e)))}loadOrders(){this.salesMng.getAllOrders().subscribe(e=>{if(e.salesOrders)return this.salesOrdersL=e.salesOrders[0],this.salesOrdersL=this.salesOrdersL.sort().reverse(),void this.loadPedido()})}loadDevoluciones(){this.salesMng.getAllDevoluciones().subscribe(e=>{if(e.devoluciones)return this.listaDevoluciones=e.devoluciones[0],void(this.listaDevoluciones=this.listaDevoluciones.sort().reverse())})}loadPedido(){this.idPedido&&this.idPedido>0&&(this.pedido=this.salesOrdersL.filter(e=>e.idpedidos===this.idPedido),this.generateVPedido())}_filter(e){if((0,x.b)(200),""!=this.criterio){const i=e.toString().toLowerCase();this.FiltroC=this.ClientesS.filter(o=>{var s;return null===(s=o.documento)||void 0===s?void 0:s.toString().toLowerCase().includes(i)}),0===this.FiltroC.length&&(this.FiltroC=[{nombre:"No hay coincidencias"}])}else this.FiltroC=[{nombre:"No hay coincidencias"}];return this.FiltroC}loadProductos(){this.stManager.getAllProducts().subscribe(e=>{e.productos&&(this.productosL=e.productos[0])})}loadServicios(){this.stManager.getAllServicios().subscribe(e=>{e.servicios&&(this.serviciosL=e.servicios[0])})}selectForQuery(e){this.forQuery=!0,localStorage.setItem("search",JSON.stringify(e)),this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.salesFilters=this.salesOrdersL.filter(i=>i.cliente===this.selectedItem.documento),this.salidaList=[],this.salesFilters.length>0&&this.salesFilters.forEach(i=>{const s=new Date(i.anio||1900,(i.mes||1)-1,i.dia||1),d=this.ciudadesL.filter(c=>c.codigo===i.ciudad);this.salidaList.push({idpedidos:i.idpedidos,documento:this.selectedItem.documento||0,nombre:this.selectedItem.nombre||"",direccionEntrega:i.direccionEntrega||"",ciudad:i.ciudad||"",ciudadN:d[0].Ciudad||"",observaciones:i.observaciones||"",fecha:s})})}limpiarInfo(){this.selectedItem={},this.forLoad=!1,this.forQuery=!1,localStorage.removeItem("search"),this.miForm.reset(),this.editar=!1,this.salesMng.clearDetalle(),this.totales={sub:0,subImpuesto:0,subDescuento:0,total:0}}loadAllClients(){this.clManager.getAllClients().subscribe(e=>{e.clientes&&(this.ClientesS=e.clientes[0])})}loadInfo(){this.forQuery?(this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.forLoad=!0):m().fire({text:"No has seleccionado un cliente aun",icon:"warning"})}generateVPedido(){this.salesFilters=this.salesOrdersL.filter(i=>i.idpedidos===this.pedido[0].idpedidos);const e=this.ClientesS.filter(i=>i.documento===this.pedido[0].cliente);this.selectedItem=e[0],this.salesFilters.length>0&&this.salesFilters.forEach(i=>{const s=new Date(i.anio||1900,(i.mes?i.mes:1)-1,i.dia||1),d=this.ciudadesL.filter(c=>c.codigo===i.ciudad);this.salidaList.push({idpedidos:i.idpedidos,documento:this.selectedItem.documento||0,nombre:this.selectedItem.nombre||"",direccionEntrega:i.direccionEntrega||"",ciudad:i.ciudad||"",ciudadN:d[0].Ciudad||"",observaciones:i.observaciones||"",fecha:s})}),this.loadForUpdate(this.salidaList[0])}loadOrderDetail(e){this.devolucionesPedido=this.listaDevoluciones.filter(i=>i.pedido===e)}loadForUpdate(e){this.OrderForUpd=e,this.forLoad=!1,this.editar=!0,this.loadOrderDetail(this.OrderForUpd.idpedidos||0)}ValidaCampo(e){return this.miForm.controls[e].errors&&this.miForm.controls[e].touched}editable(){this.cargaEditable=!0}closeEditable(){this.cargaEditable=!1}cancelar(){this.editar=!1,this.criterio="",this.miForm.reset(),this.limpiarInfo()}loadCiudades(){this.dataM.getAllCities().subscribe(e=>{e.ciudades&&(this.ciudadesL=e.ciudades[0])})}loadDetalleInv(){this.salesMng.viewInventario().subscribe(e=>{e.detalleInv&&(this.detalleInvL=e.detalleInv[0])})}pageEvent(e){this.p_Size=e.pageSize,this.page=e.pageIndex+1}pageEventD(e){this.pSize=e.pageSize,this.pageD=e.pageIndex+1}tipoP(){this.tipoPS="P"}tipoS(){this.tipoPS="S"}agregarDetalle(){var e,i,o,s;let d;const r={};if("P"===this.tipoPS){d=null===(e=this.miForm.get("productoD"))||void 0===e?void 0:e.value;const u=this.detalleInvL.filter(h=>h.idProductos==d);r.productoName=u[0].producto,r.precio=u[0].PrecioVenta,r.impuesto=u[0].impuesto,r.producto=d,r.descuento=u[0].descuento}else if("S"===this.tipoPS){d=null===(i=this.miForm.get("servicioD"))||void 0===i?void 0:i.value;const u=this.serviciosL.filter(h=>h.idServicios==d);r.productoName=u[0].servicio,r.precio=u[0].precio,r.impuesto=u[0].impuesto,r.producto=d,r.descuento=u[0].descuento}const c=this.OrderForUpd.fecha;r.cantidad=null===(o=this.miForm.get("cantidad"))||void 0===o?void 0:o.value,r.clienteDoc=this.OrderForUpd.documento,r.clienteName=this.OrderForUpd.nombre,r.ciudad=this.OrderForUpd.ciudad,r.ciudadName=this.OrderForUpd.ciudadN,r.pedido=this.OrderForUpd.idpedidos,r.tipoProducto=this.tipoPS,r.subTotal=(r.precio||0)*(r.cantidad||0),r.subTotalImpuesto=(r.precio||0)*((r.impuesto||0)/100)*(r.cantidad||0),r.subTotalDescuento=(r.precio||0)*((r.descuento||0)/100)*(r.cantidad||0),r.total=(r.subTotal||0)+(r.subTotalImpuesto||0)-(r.subTotalDescuento||0),r.anio=c.getFullYear();let g=c.getMonth()||1;r.mes=g+1,r.dia=c.getDate(),this.salesMng.addDetalle(r),null===(s=this.miForm.get("cantidad"))||void 0===s||s.setValue(1)}selectUpdate(e){var i,o;this.vistaDetalleUpdate=e,null===(i=this.miForm.get("cantidad"))||void 0===i||i.setValue(this.vistaDetalleUpdate.cantidad),null===(o=this.miForm.get("observaciones"))||void 0===o||o.setValue(this.vistaDetalleUpdate.observaciones)}updateDevolucion(){var e,i;this.miForm.invalid?m().fire({icon:"info",title:"Oops...",text:"Hay cosas por corregir"}).then(o=>{this.miForm.markAllAsTouched()}):(this.vistaDetalleUpdate.cantidad=null===(e=this.miForm.get("cantidad"))||void 0===e?void 0:e.value,this.vistaDetalleUpdate.observaciones=null===(i=this.miForm.get("observaciones"))||void 0===i?void 0:i.value,this.salesMng.updateDevolucion(this.vistaDetalleUpdate).subscribe(o=>{if(o.error){const s=o.error.errors[0].msg,d=o.error.errors[0].param||"";m().fire({icon:"error",title:"Oops..."+d,text:s})}else m().fire({icon:"success",title:"Actualizaci\xf3n correcta",text:o.statusDescription}).then(s=>{this.forLoad=!1,this.criterio="",this.vistaDetalleUpdate={},this.limpiarInfo()})}))}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(q),t.Y36(C.gz),t.Y36(l.qu),t.Y36(D.y),t.Y36(F.m),t.Y36(y.G))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-find-devolucion"]],decls:18,vars:8,consts:[[1,"container"],[1,"example-form","form-floating","p-2","m-2"],[1,"m-3","example-full-width"],["type","text","placeholder","","aria-label","Documento cliente","matInput","",1,"example-full-width",3,"formControl","matAutocomplete","ngModel","ngModelChange","focus"],[1,"example-full-width"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",1,"m-2",3,"click"],["class","container",4,"ngIf"],[3,"value","click"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],["aria-label","Select page",1,"m-3","example-full-width",3,"length","pageSize","pageSizeOptions","page"],[1,"col-1"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"table","table-striped","table-hover","w-50"],["class","w-100",4,"ngIf"],[1,"w-100"],[1,"table","table-striped","table-hover","w-100"],["aria-label","Select pageD",1,"m-3","example-full-width",3,"length","pageSize","pageSizeOptions","page"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"B\xfasqueda de devoluciones"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",0)(5,"form",1)(6,"mat-form-field",2)(7,"mat-label"),t._uU(8,"Documento cliente"),t.qZA(),t.TgZ(9,"input",3),t.NdJ("ngModelChange",function(s){return i.criterio=s})("focus",function(){return i.limpiarInfo()}),t.qZA(),t.TgZ(10,"mat-autocomplete",4,5),t.YNc(12,be,2,3,"mat-option",6),t.ALo(13,"async"),t.qZA()(),t.TgZ(14,"button",7),t.NdJ("click",function(){return i.loadInfo()}),t._uU(15,"Visualizar"),t.qZA()()(),t.YNc(16,Te,22,8,"div",8),t.YNc(17,xe,15,4,"div",8),t.qZA()),2&e){const o=t.MAs(11);t.xp6(9),t.Q6J("formControl",i.myControl)("matAutocomplete",o)("ngModel",i.criterio),t.xp6(3),t.Q6J("ngForOf",t.lcZ(13,6,i.filteredOptions)),t.xp6(4),t.Q6J("ngIf",i.forLoad),t.xp6(1),t.Q6J("ngIf",i.editar)}},directives:[l._Y,l.JL,l.F,f.KE,f.hX,O.Nt,l.Fj,b.ZL,l.JJ,l.oH,b.XC,p.sg,I.ey,L.lW,p.O5,P.NW],pipes:[p.Ov,N,p.uU,p.JJ],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]}),a})(),canActivate:[_.z],canLoad:[_.z]},{path:"uDevoluciones",component:(()=>{class a{constructor(e,i,o,s,d,r){this.salesMng=e,this.aRute=i,this.fb=o,this.clManager=s,this.dataM=d,this.stManager=r,this.myControl=new l.NI,this.criterio="",this.ClientesS=[],this.FiltroC=[],this.forQuery=!1,this.forLoad=!1,this.ciudadesL=[],this.salesOrdersL=[],this.salesFilters=[],this.salidaList=[],this.editar=!1,this.cargaEditable=!1,this.detalleL=[],this.productosL=[],this.serviciosL=[],this.detalleInvL=[],this.viewInvL=[],this.tipoPS="",this.totales={sub:0,subImpuesto:0,subDescuento:0,total:0},this.listaDevoluciones=[],this.devolucionesPedido=[],this.p_Size=5,this.page=1,this.optionsPage=[5,10,30,50],this.miForm=this.fb.group({cantidad:[1,[l.kI.required,l.kI.min(1)]],observaciones:["",[l.kI.required,l.kI.minLength(3)]]}),this.idPedido=0,this.pSize=5,this.pageD=1,this.optionsPageD=[5,10,30,50]}ngOnInit(){this.loadAllClients(),this.loadCiudades(),this.loadProductos(),this.loadServicios(),this.loadDetalleInv(),this.loadDevoluciones(),this.loadOrders(),this.filteredOptions=this.myControl.valueChanges.pipe((0,Z.U)(e=>this._filter(e)))}loadOrders(){this.salesMng.getAllOrders().subscribe(e=>{if(e.salesOrders)return this.salesOrdersL=e.salesOrders[0],this.salesOrdersL=this.salesOrdersL.sort().reverse(),void this.loadPedido()})}loadDevoluciones(){this.salesMng.getAllDevoluciones().subscribe(e=>{if(e.devoluciones)return this.listaDevoluciones=e.devoluciones[0],void(this.listaDevoluciones=this.listaDevoluciones.sort().reverse())})}loadPedido(){this.idPedido&&this.idPedido>0&&(this.pedido=this.salesOrdersL.filter(e=>e.idpedidos===this.idPedido),this.generateVPedido())}_filter(e){if((0,x.b)(200),""!=this.criterio){const i=e.toString().toLowerCase();this.FiltroC=this.ClientesS.filter(o=>{var s;return null===(s=o.documento)||void 0===s?void 0:s.toString().toLowerCase().includes(i)}),0===this.FiltroC.length&&(this.FiltroC=[{nombre:"No hay coincidencias"}])}else this.FiltroC=[{nombre:"No hay coincidencias"}];return this.FiltroC}loadProductos(){this.stManager.getAllProducts().subscribe(e=>{e.productos&&(this.productosL=e.productos[0])})}loadServicios(){this.stManager.getAllServicios().subscribe(e=>{e.servicios&&(this.serviciosL=e.servicios[0])})}selectForQuery(e){this.forQuery=!0,localStorage.setItem("search",JSON.stringify(e)),this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.salesFilters=this.salesOrdersL.filter(i=>i.cliente===this.selectedItem.documento),this.salidaList=[],this.salesFilters.length>0&&this.salesFilters.forEach(i=>{const s=new Date(i.anio||1900,(i.mes||1)-1,i.dia||1),d=this.ciudadesL.filter(c=>c.codigo===i.ciudad);this.salidaList.push({idpedidos:i.idpedidos,documento:this.selectedItem.documento||0,nombre:this.selectedItem.nombre||"",direccionEntrega:i.direccionEntrega||"",ciudad:i.ciudad||"",ciudadN:d[0].Ciudad||"",observaciones:i.observaciones||"",fecha:s})})}limpiarInfo(){this.selectedItem={},this.forLoad=!1,this.forQuery=!1,localStorage.removeItem("search"),this.miForm.reset(),this.editar=!1,this.salesMng.clearDetalle(),this.totales={sub:0,subImpuesto:0,subDescuento:0,total:0}}loadAllClients(){this.clManager.getAllClients().subscribe(e=>{e.clientes&&(this.ClientesS=e.clientes[0])})}loadInfo(){this.forQuery?(this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.forLoad=!0):m().fire({text:"No has seleccionado un cliente aun",icon:"warning"})}generateVPedido(){this.salesFilters=this.salesOrdersL.filter(i=>i.idpedidos===this.pedido[0].idpedidos);const e=this.ClientesS.filter(i=>i.documento===this.pedido[0].cliente);this.selectedItem=e[0],this.salesFilters.length>0&&this.salesFilters.forEach(i=>{const s=new Date(i.anio||1900,(i.mes?i.mes:1)-1,i.dia||1),d=this.ciudadesL.filter(c=>c.codigo===i.ciudad);this.salidaList.push({idpedidos:i.idpedidos,documento:this.selectedItem.documento||0,nombre:this.selectedItem.nombre||"",direccionEntrega:i.direccionEntrega||"",ciudad:i.ciudad||"",ciudadN:d[0].Ciudad||"",observaciones:i.observaciones||"",fecha:s})}),this.loadForUpdate(this.salidaList[0])}loadOrderDetail(e){this.devolucionesPedido=this.listaDevoluciones.filter(i=>i.pedido===e)}loadForUpdate(e){this.OrderForUpd=e,this.forLoad=!1,this.editar=!0,this.loadOrderDetail(this.OrderForUpd.idpedidos||0)}ValidaCampo(e){return this.miForm.controls[e].errors&&this.miForm.controls[e].touched}editable(){this.cargaEditable=!0}closeEditable(){this.cargaEditable=!1}cancelar(){this.editar=!1,this.criterio="",this.miForm.reset(),this.limpiarInfo()}loadCiudades(){this.dataM.getAllCities().subscribe(e=>{e.ciudades&&(this.ciudadesL=e.ciudades[0])})}loadDetalleInv(){this.salesMng.viewInventario().subscribe(e=>{e.detalleInv&&(this.detalleInvL=e.detalleInv[0])})}pageEvent(e){this.p_Size=e.pageSize,this.page=e.pageIndex+1}pageEventD(e){this.pSize=e.pageSize,this.pageD=e.pageIndex+1}tipoP(){this.tipoPS="P"}tipoS(){this.tipoPS="S"}agregarDetalle(){var e,i,o,s;let d;const r={};if("P"===this.tipoPS){d=null===(e=this.miForm.get("productoD"))||void 0===e?void 0:e.value;const u=this.detalleInvL.filter(h=>h.idProductos==d);r.productoName=u[0].producto,r.precio=u[0].PrecioVenta,r.impuesto=u[0].impuesto,r.producto=d,r.descuento=u[0].descuento}else if("S"===this.tipoPS){d=null===(i=this.miForm.get("servicioD"))||void 0===i?void 0:i.value;const u=this.serviciosL.filter(h=>h.idServicios==d);r.productoName=u[0].servicio,r.precio=u[0].precio,r.impuesto=u[0].impuesto,r.producto=d,r.descuento=u[0].descuento}const c=this.OrderForUpd.fecha;r.cantidad=null===(o=this.miForm.get("cantidad"))||void 0===o?void 0:o.value,r.clienteDoc=this.OrderForUpd.documento,r.clienteName=this.OrderForUpd.nombre,r.ciudad=this.OrderForUpd.ciudad,r.ciudadName=this.OrderForUpd.ciudadN,r.pedido=this.OrderForUpd.idpedidos,r.tipoProducto=this.tipoPS,r.subTotal=(r.precio||0)*(r.cantidad||0),r.subTotalImpuesto=(r.precio||0)*((r.impuesto||0)/100)*(r.cantidad||0),r.subTotalDescuento=(r.precio||0)*((r.descuento||0)/100)*(r.cantidad||0),r.total=(r.subTotal||0)+(r.subTotalImpuesto||0)-(r.subTotalDescuento||0),r.anio=c.getFullYear();let g=c.getMonth()||1;r.mes=g+1,r.dia=c.getDate(),this.salesMng.addDetalle(r),null===(s=this.miForm.get("cantidad"))||void 0===s||s.setValue(1)}selectUpdate(e){var i,o;this.vistaDetalleUpdate=e,null===(i=this.miForm.get("cantidad"))||void 0===i||i.setValue(this.vistaDetalleUpdate.cantidad),null===(o=this.miForm.get("observaciones"))||void 0===o||o.setValue(this.vistaDetalleUpdate.observaciones)}updateDevolucion(){var e,i;this.miForm.invalid?m().fire({icon:"info",title:"Oops...",text:"Hay cosas por corregir"}).then(o=>{this.miForm.markAllAsTouched()}):(this.vistaDetalleUpdate.cantidad=null===(e=this.miForm.get("cantidad"))||void 0===e?void 0:e.value,this.vistaDetalleUpdate.observaciones=null===(i=this.miForm.get("observaciones"))||void 0===i?void 0:i.value,this.salesMng.updateDevolucion(this.vistaDetalleUpdate).subscribe(o=>{if(o.error){const s=o.error.errors[0].msg,d=o.error.errors[0].param||"";m().fire({icon:"error",title:"Oops..."+d,text:s})}else m().fire({icon:"success",title:"Actualizaci\xf3n correcta",text:o.statusDescription}).then(s=>{this.forLoad=!1,this.criterio="",this.vistaDetalleUpdate={},this.limpiarInfo()})}))}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(q),t.Y36(C.gz),t.Y36(l.qu),t.Y36(D.y),t.Y36(F.m),t.Y36(y.G))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-upd-devolucion"]],decls:43,vars:11,consts:[[1,"container"],[1,"example-form","form-floating","p-2","m-2"],[1,"m-3","example-full-width"],["type","text","placeholder","","aria-label","Documento cliente","matInput","",1,"example-full-width",3,"formControl","matAutocomplete","ngModel","ngModelChange","focus"],[1,"example-full-width"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",1,"m-2",3,"click"],["class","container",4,"ngIf"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"form-control","form-floating"],["action","",3,"formGroup"],[1,"form-floating","m-3"],["type","number","id","floatingInput","placeholder","Cantidad","formControlName","cantidad",1,"form-control"],["for","floatingInput"],["class","form-text text-danger",4,"ngIf"],["type","text","id","floatingInput","placeholder","Observaciones","formControlName","observaciones",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],[3,"value","click"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],["aria-label","Select page",1,"m-3","example-full-width",3,"length","pageSize","pageSizeOptions","page"],[1,"col-1"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"table","table-striped","table-hover","w-50"],["class","w-100",4,"ngIf"],[1,"w-100"],[1,"table","table-striped","table-hover","w-100"],["aria-label","Select pageD",1,"m-3","example-full-width",3,"length","pageSize","pageSizeOptions","page"],["type","button","data-bs-toggle","modal","data-bs-target","#staticBackdrop",3,"click"],[1,"material-icons","bi","md-48","bg-warning","rounded-circle","float-end"],[1,"form-text","text-danger"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Actualizaci\xf3n devoluciones"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",0)(5,"form",1)(6,"mat-form-field",2)(7,"mat-label"),t._uU(8,"Documento cliente"),t.qZA(),t.TgZ(9,"input",3),t.NdJ("ngModelChange",function(s){return i.criterio=s})("focus",function(){return i.limpiarInfo()}),t.qZA(),t.TgZ(10,"mat-autocomplete",4,5),t.YNc(12,Fe,2,3,"mat-option",6),t.ALo(13,"async"),t.qZA()(),t.TgZ(14,"button",7),t.NdJ("click",function(){return i.loadInfo()}),t._uU(15,"Visualizar"),t.qZA()()(),t.YNc(16,Oe,22,8,"div",8),t.YNc(17,Se,15,4,"div",8),t.TgZ(18,"div",9)(19,"div",10)(20,"div",11)(21,"div",12)(22,"h5",13),t._uU(23,"Editar devoluci\xf3n"),t.qZA(),t._UZ(24,"button",14),t.qZA(),t.TgZ(25,"div",15)(26,"div",16)(27,"form",17)(28,"div",18),t._UZ(29,"input",19),t.TgZ(30,"label",20),t._uU(31,"Cantidad"),t.qZA(),t.YNc(32,Pe,2,0,"span",21),t.qZA(),t.TgZ(33,"div",18),t._UZ(34,"input",22),t.TgZ(35,"label",20),t._uU(36,"Observaciones"),t.qZA(),t.YNc(37,Ne,2,0,"span",21),t.qZA()()()(),t.TgZ(38,"div",23)(39,"button",24),t._uU(40,"Cancelar"),t.qZA(),t.TgZ(41,"button",25),t.NdJ("click",function(){return i.updateDevolucion()}),t._uU(42,"Actualizar"),t.qZA()()()()()()),2&e){const o=t.MAs(11);t.xp6(9),t.Q6J("formControl",i.myControl)("matAutocomplete",o)("ngModel",i.criterio),t.xp6(3),t.Q6J("ngForOf",t.lcZ(13,9,i.filteredOptions)),t.xp6(4),t.Q6J("ngIf",i.forLoad),t.xp6(1),t.Q6J("ngIf",i.editar),t.xp6(10),t.Q6J("formGroup",i.miForm),t.xp6(5),t.Q6J("ngIf",i.ValidaCampo("cantidad")),t.xp6(5),t.Q6J("ngIf",i.ValidaCampo("observaciones"))}},directives:[l._Y,l.JL,l.F,f.KE,f.hX,O.Nt,l.Fj,b.ZL,l.JJ,l.oH,b.XC,p.sg,I.ey,L.lW,p.O5,P.NW,l.sg,l.wV,l.u],pipes:[p.Ov,N,p.uU,p.JJ],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]}),a})(),canActivate:[_.z],canLoad:[_.z]},{path:"dDevoluciones",component:(()=>{class a{constructor(e,i,o,s,d,r){this.salesMng=e,this.aRute=i,this.fb=o,this.clManager=s,this.dataM=d,this.stManager=r,this.myControl=new l.NI,this.criterio="",this.ClientesS=[],this.FiltroC=[],this.forQuery=!1,this.forLoad=!1,this.ciudadesL=[],this.salesOrdersL=[],this.salesFilters=[],this.salidaList=[],this.editar=!1,this.cargaEditable=!1,this.detalleL=[],this.productosL=[],this.serviciosL=[],this.detalleInvL=[],this.viewInvL=[],this.tipoPS="",this.totales={sub:0,subImpuesto:0,subDescuento:0,total:0},this.listaDevoluciones=[],this.devolucionesPedido=[],this.p_Size=5,this.page=1,this.optionsPage=[5,10,30,50],this.miForm=this.fb.group({cantidad:[1,[l.kI.required,l.kI.min(1)]],observaciones:["",[l.kI.required,l.kI.minLength(3)]]}),this.idPedido=0,this.pSize=5,this.pageD=1,this.optionsPageD=[5,10,30,50]}ngOnInit(){this.loadAllClients(),this.loadCiudades(),this.loadProductos(),this.loadServicios(),this.loadDetalleInv(),this.loadDevoluciones(),this.loadOrders(),this.filteredOptions=this.myControl.valueChanges.pipe((0,Z.U)(e=>this._filter(e)))}loadOrders(){this.salesMng.getAllOrders().subscribe(e=>{if(e.salesOrders)return this.salesOrdersL=e.salesOrders[0],this.salesOrdersL=this.salesOrdersL.sort().reverse(),void this.loadPedido()})}loadDevoluciones(){this.salesMng.getAllDevoluciones().subscribe(e=>{if(e.devoluciones)return this.listaDevoluciones=e.devoluciones[0],void(this.listaDevoluciones=this.listaDevoluciones.sort().reverse())})}loadPedido(){this.idPedido&&this.idPedido>0&&(this.pedido=this.salesOrdersL.filter(e=>e.idpedidos===this.idPedido),this.generateVPedido())}_filter(e){if((0,x.b)(200),""!=this.criterio){const i=e.toString().toLowerCase();this.FiltroC=this.ClientesS.filter(o=>{var s;return null===(s=o.documento)||void 0===s?void 0:s.toString().toLowerCase().includes(i)}),0===this.FiltroC.length&&(this.FiltroC=[{nombre:"No hay coincidencias"}])}else this.FiltroC=[{nombre:"No hay coincidencias"}];return this.FiltroC}loadProductos(){this.stManager.getAllProducts().subscribe(e=>{e.productos&&(this.productosL=e.productos[0])})}loadServicios(){this.stManager.getAllServicios().subscribe(e=>{e.servicios&&(this.serviciosL=e.servicios[0])})}selectForQuery(e){this.forQuery=!0,localStorage.setItem("search",JSON.stringify(e)),this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.salesFilters=this.salesOrdersL.filter(i=>i.cliente===this.selectedItem.documento),this.salidaList=[],this.salesFilters.length>0&&this.salesFilters.forEach(i=>{const s=new Date(i.anio||1900,(i.mes||1)-1,i.dia||1),d=this.ciudadesL.filter(c=>c.codigo===i.ciudad);this.salidaList.push({idpedidos:i.idpedidos,documento:this.selectedItem.documento||0,nombre:this.selectedItem.nombre||"",direccionEntrega:i.direccionEntrega||"",ciudad:i.ciudad||"",ciudadN:d[0].Ciudad||"",observaciones:i.observaciones||"",fecha:s})})}limpiarInfo(){this.selectedItem={},this.forLoad=!1,this.forQuery=!1,localStorage.removeItem("search"),this.miForm.reset(),this.editar=!1,this.salesMng.clearDetalle(),this.totales={sub:0,subImpuesto:0,subDescuento:0,total:0}}loadAllClients(){this.clManager.getAllClients().subscribe(e=>{e.clientes&&(this.ClientesS=e.clientes[0])})}loadInfo(){this.forQuery?(this.selectedItem=JSON.parse(localStorage.getItem("search")||""),this.forLoad=!0):m().fire({text:"No has seleccionado un cliente aun",icon:"warning"})}generateVPedido(){this.salesFilters=this.salesOrdersL.filter(i=>i.idpedidos===this.pedido[0].idpedidos);const e=this.ClientesS.filter(i=>i.documento===this.pedido[0].cliente);this.selectedItem=e[0],this.salesFilters.length>0&&this.salesFilters.forEach(i=>{const s=new Date(i.anio||1900,(i.mes?i.mes:1)-1,i.dia||1),d=this.ciudadesL.filter(c=>c.codigo===i.ciudad);this.salidaList.push({idpedidos:i.idpedidos,documento:this.selectedItem.documento||0,nombre:this.selectedItem.nombre||"",direccionEntrega:i.direccionEntrega||"",ciudad:i.ciudad||"",ciudadN:d[0].Ciudad||"",observaciones:i.observaciones||"",fecha:s})}),this.loadForUpdate(this.salidaList[0])}loadOrderDetail(e){this.devolucionesPedido=this.listaDevoluciones.filter(i=>i.pedido===e)}loadForUpdate(e){this.OrderForUpd=e,this.forLoad=!1,this.editar=!0,this.loadOrderDetail(this.OrderForUpd.idpedidos||0)}ValidaCampo(e){return this.miForm.controls[e].errors&&this.miForm.controls[e].touched}editable(){this.cargaEditable=!0}closeEditable(){this.cargaEditable=!1}cancelar(){this.editar=!1,this.criterio="",this.miForm.reset(),this.limpiarInfo()}loadCiudades(){this.dataM.getAllCities().subscribe(e=>{e.ciudades&&(this.ciudadesL=e.ciudades[0])})}loadDetalleInv(){this.salesMng.viewInventario().subscribe(e=>{e.detalleInv&&(this.detalleInvL=e.detalleInv[0])})}pageEvent(e){this.p_Size=e.pageSize,this.page=e.pageIndex+1}pageEventD(e){this.pSize=e.pageSize,this.pageD=e.pageIndex+1}tipoP(){this.tipoPS="P"}tipoS(){this.tipoPS="S"}agregarDetalle(){var e,i,o,s;let d;const r={};if("P"===this.tipoPS){d=null===(e=this.miForm.get("productoD"))||void 0===e?void 0:e.value;const u=this.detalleInvL.filter(h=>h.idProductos==d);r.productoName=u[0].producto,r.precio=u[0].PrecioVenta,r.impuesto=u[0].impuesto,r.producto=d,r.descuento=u[0].descuento}else if("S"===this.tipoPS){d=null===(i=this.miForm.get("servicioD"))||void 0===i?void 0:i.value;const u=this.serviciosL.filter(h=>h.idServicios==d);r.productoName=u[0].servicio,r.precio=u[0].precio,r.impuesto=u[0].impuesto,r.producto=d,r.descuento=u[0].descuento}const c=this.OrderForUpd.fecha;r.cantidad=null===(o=this.miForm.get("cantidad"))||void 0===o?void 0:o.value,r.clienteDoc=this.OrderForUpd.documento,r.clienteName=this.OrderForUpd.nombre,r.ciudad=this.OrderForUpd.ciudad,r.ciudadName=this.OrderForUpd.ciudadN,r.pedido=this.OrderForUpd.idpedidos,r.tipoProducto=this.tipoPS,r.subTotal=(r.precio||0)*(r.cantidad||0),r.subTotalImpuesto=(r.precio||0)*((r.impuesto||0)/100)*(r.cantidad||0),r.subTotalDescuento=(r.precio||0)*((r.descuento||0)/100)*(r.cantidad||0),r.total=(r.subTotal||0)+(r.subTotalImpuesto||0)-(r.subTotalDescuento||0),r.anio=c.getFullYear();let g=c.getMonth()||1;r.mes=g+1,r.dia=c.getDate(),this.salesMng.addDetalle(r),null===(s=this.miForm.get("cantidad"))||void 0===s||s.setValue(1)}selectUpdate(e){var i,o;this.vistaDetalleUpdate=e,null===(i=this.miForm.get("cantidad"))||void 0===i||i.setValue(this.vistaDetalleUpdate.cantidad),null===(o=this.miForm.get("observaciones"))||void 0===o||o.setValue(this.vistaDetalleUpdate.observaciones)}deleteDevolucion(){this.miForm.invalid?m().fire({icon:"info",title:"Oops...",text:"Hay cosas por corregir"}).then(e=>{this.miForm.markAllAsTouched()}):this.salesMng.deleteDevolucion(this.vistaDetalleUpdate).subscribe(e=>{if(e.error){const i=e.error.errors[0].msg,o=e.error.errors[0].param||"";m().fire({icon:"error",title:"Oops..."+o,text:i})}else m().fire({icon:"success",title:"Eliminaci\xf3n correcta",text:e.statusDescription}).then(i=>{this.forLoad=!1,this.criterio="",this.vistaDetalleUpdate={},this.limpiarInfo()})})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(q),t.Y36(C.gz),t.Y36(l.qu),t.Y36(D.y),t.Y36(F.m),t.Y36(y.G))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-del-devolucion"]],decls:43,vars:11,consts:[[1,"container"],[1,"example-form","form-floating","p-2","m-2"],[1,"m-3","example-full-width"],["type","text","placeholder","","aria-label","Documento cliente","matInput","",1,"example-full-width",3,"formControl","matAutocomplete","ngModel","ngModelChange","focus"],[1,"example-full-width"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",1,"m-2",3,"click"],["class","container",4,"ngIf"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"form-control","form-floating"],["action","",3,"formGroup"],[1,"form-floating","m-3"],["type","number","id","floatingInput","readonly","","placeholder","Cantidad","formControlName","cantidad",1,"form-control"],["for","floatingInput"],["class","form-text text-danger",4,"ngIf"],["type","text","id","floatingInput","readonly","","placeholder","Observaciones","formControlName","observaciones",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[3,"value","click"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],["aria-label","Select page",1,"m-3","example-full-width",3,"length","pageSize","pageSizeOptions","page"],[1,"col-1"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"table","table-striped","table-hover","w-50"],["class","w-100",4,"ngIf"],[1,"w-100"],[1,"table","table-striped","table-hover","w-100"],["aria-label","Select pageD",1,"m-3","example-full-width",3,"length","pageSize","pageSizeOptions","page"],["type","button","data-bs-toggle","modal","data-bs-target","#staticBackdrop",3,"click"],[1,"material-icons","bi","md-48","bg-danger","rounded-circle","float-end"],[1,"form-text","text-danger"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Eliminaci\xf3n devoluciones"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",0)(5,"form",1)(6,"mat-form-field",2)(7,"mat-label"),t._uU(8,"Documento cliente"),t.qZA(),t.TgZ(9,"input",3),t.NdJ("ngModelChange",function(s){return i.criterio=s})("focus",function(){return i.limpiarInfo()}),t.qZA(),t.TgZ(10,"mat-autocomplete",4,5),t.YNc(12,Me,2,3,"mat-option",6),t.ALo(13,"async"),t.qZA()(),t.TgZ(14,"button",7),t.NdJ("click",function(){return i.loadInfo()}),t._uU(15,"Visualizar"),t.qZA()()(),t.YNc(16,Je,22,8,"div",8),t.YNc(17,ze,15,4,"div",8),t.TgZ(18,"div",9)(19,"div",10)(20,"div",11)(21,"div",12)(22,"h5",13),t._uU(23,"Eliminar devoluci\xf3n"),t.qZA(),t._UZ(24,"button",14),t.qZA(),t.TgZ(25,"div",15)(26,"div",16)(27,"form",17)(28,"div",18),t._UZ(29,"input",19),t.TgZ(30,"label",20),t._uU(31,"Cantidad"),t.qZA(),t.YNc(32,Qe,2,0,"span",21),t.qZA(),t.TgZ(33,"div",18),t._UZ(34,"input",22),t.TgZ(35,"label",20),t._uU(36,"Observaciones"),t.qZA(),t.YNc(37,Ye,2,0,"span",21),t.qZA()()()(),t.TgZ(38,"div",23)(39,"button",24),t._uU(40,"Cancelar"),t.qZA(),t.TgZ(41,"button",25),t.NdJ("click",function(){return i.deleteDevolucion()}),t._uU(42,"Eliminar"),t.qZA()()()()()()),2&e){const o=t.MAs(11);t.xp6(9),t.Q6J("formControl",i.myControl)("matAutocomplete",o)("ngModel",i.criterio),t.xp6(3),t.Q6J("ngForOf",t.lcZ(13,9,i.filteredOptions)),t.xp6(4),t.Q6J("ngIf",i.forLoad),t.xp6(1),t.Q6J("ngIf",i.editar),t.xp6(10),t.Q6J("formGroup",i.miForm),t.xp6(5),t.Q6J("ngIf",i.ValidaCampo("cantidad")),t.xp6(5),t.Q6J("ngIf",i.ValidaCampo("observaciones"))}},directives:[l._Y,l.JL,l.F,f.KE,f.hX,O.Nt,l.Fj,b.ZL,l.JJ,l.oH,b.XC,p.sg,I.ey,L.lW,p.O5,P.NW,l.sg,l.wV,l.u],pipes:[p.Ov,N,p.uU,p.JJ],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]}),a})(),canActivate:[_.z],canLoad:[_.z]}]}];let He=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[C.Bz.forChild($e)],C.Bz]}),a})();var Xe=v(7547);let Be=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[p.ez,He,Xe.q,l.UX,l.u5]]}),a})()}}]);